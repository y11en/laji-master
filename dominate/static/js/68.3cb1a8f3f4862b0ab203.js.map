{"version":3,"sources":["webpack:///static/js/68.3cb1a8f3f4862b0ab203.js","webpack:///./src/components/img_upload.vue","webpack:///./src/assets/js/jquery.jcrop.js","webpack:///src/components/img_upload.vue","webpack:///./src/components/img_upload.vue?a8df"],"names":["webpackJsonp","4xxa","module","exports","PsVy","__webpack_exports__","__webpack_require__","injectStyle","context","Object","defineProperty","value","helpers_typeof","typeof_default","n","$","Jcrop","obj","opt","px","Math","round","cssClass","cl","options","baseClass","supportsColorFade","fx","step","hasOwnProperty","getPos","pos","offset","left","top","mouseAbs","e","pageX","docOffset","pageY","setOptions","extend","each","i","startDragMode","mode","touch","$img","Tracker","setCursor","activateHandlers","createMover","doneSelect","fc","Coords","getFixed","opp","oppLockCorner","opc","getCorner","setPressed","setCurrent","dragmodeHandler","f","aspectRatio","y","x","y2","x2","Selection","update","lloc","KeyManager","watchKeys","moveOffset","ord","createDragger","disabled","allowMove","btndown","stopPropagation","preventDefault","presize","$obj","w","h","nw","width","nh","height","xscale","yscale","unscale","c","minSelect","enableHandles","done","release","allowSelect","newSelection","disableHandles","selectDrag","type","substring","newTracker","trk","addClass","is_msie","css","opacity","backgroundColor","setClass","cname","$div","removeClass","animateTo","a","callback","queueAnimator","window","setTimeout","animator","interv","x1","y1","animating","animto","flipCoords","initcr","animat","animationDelay","ix1","iy1","ix2","iy2","pcent","velocity","swingSpeed","animMode","setSelectRaw","call","api","setSelect","rect","onSelect","l","tellSelect","tellScaled","setOptionsNew","interfaceUpdate","disableCrop","enableCrop","cancelCrop","destroy","remove","$origimg","show","removeData","setImage","src","img","Image","onload","iw","ih","bw","boxWidth","bh","boxHeight","attr","$img2","boundx","boundy","background","$trk","bound","Shade","resize","colorChangeMacro","color","now","mycolor","bgColor","bgFade","fadeTime","animate","queue","duration","alt","allowResize","enableOnly","trueSize","refresh","bgcolor","shade","getShades","shadeColor","bgopacity","bgOpacity","setBgOpacity","xlimit","maxSize","ylimit","xmin","minSize","ymin","outerImage","defaults","_ua","navigator","userAgent","toLowerCase","test","ie6mode","img_css","border","visibility","margin","padding","position","img_mode","tagName","tempImage","clone","removeAttr","after","hide","insertAfter","append","$img_holder","zIndex","overflow","$hdl_holder","$sel","dblclick","onDblClick","insertBefore","overflowY","shift_down","boundary","mousedown","Touch","hasTouchSupport","support","events","el","document","createElement","length","eventName","isSupported","setAttribute","touchstart","touchend","touchmove","err","cfilter","originalEvent","changedTouches","touchSupport","rebound","ox","oy","getOffset","getRect","xx","yy","aspect","min_x","max_x","max_y","rw","rh","rwa","abs","rha","real_ratio","makeObj","p","xa","xb","ya","yb","delta","xsize","ysize","resizeShades","shades","right","updateAuto","updateShade","bottom","createShade","appendTo","holder","enableShade","enabled","setBgColor","isAwake","setOpacity","disableShade","refreshAll","children","updateRaw","enable","disable","insertBorder","jq","borderOpacity","dragDiv","zi","cursor","bind","insertHandle","hs","handleSize","div","hdep","handleOpacity","insertDragbar","moveto","updateVisible","select","awake","onChange","force","onRelease","showHandles","seehandles","v","borders","handle","dragbar","dragEdges","isArray","createDragbars","li","createHandles","drawBorders","createBorders","currentTarget","hasClass","$track","toFront","trackTouchMove","trackTouchEnd","trackDoc","trackMove","trackUp","toBack","unbind","onMove","onDone","move","t","trackDocument","mousemove","mouseup","mouseout","before","keySupport","$keymgr","focus","onBlur","doNudge","parseKey","ctrlKey","metaKey","shiftKey","nudge","keyCode","$keywrap","keydown","blur","fixedSupport","cancel","getBounds","getWidgetSize","getScaleFactor","getOptions","ui","selection","data","fn","this","Loader","display","isFunction","imgobj","success","error","completeCheck","complete","jQuery","img_upload","props","action","default","url","acceptType","sync","maxWidth","title","visible","img_url","jcrop_api","widget","$preview","undefined","$pcnt","$pimg","canvasOption","icon_url","pre_width","zoom","methods","testMaxSize","file","self","image","files","fileData","size","reader","FileReader","target","result","val","$message","message","indexOf","split","parent","marginLeft","marginTop","resetCrop","onerror","readAsDataURL","isIE","subForm","setCanvas","syncUrl","submitImageFile","_this","returnCode","formData","FormData","blob","dataURLtoBlob","k","$myLoad","ajax","dataType","processData","contentType","$emit","JSON","parse","$loading","close","msg","xhr","XMLHttpRequest","upload","addEventListener","evt","lengthComputable","dataurl","arr","mime","match","bstr","atob","u8arr","Uint8Array","charCodeAt","Blob","filename","updatePreview","bounds","op","image_target","_img","z","crop_canvas","getContext","drawImage","toDataURL","changeImg","parseInt","rx","ry","RegExp","parseFloat","mounted","watch","_this2","$nextTick","render","_vm","_h","$createElement","_c","_self","staticClass","_v","_s","on","click","ref","attrs","id","style","_m","enctype","for","name","change","_e","staticRenderFns","component_normalizer","__vue_styles__","Component","rxrk"],"mappings":"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","file":"static/js/68.3cb1a8f3f4862b0ab203.js","sourcesContent":["webpackJsonp([68],{\n\n/***/ \"4xxa\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"PsVy\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n// EXTERNAL MODULE: ./node_modules/_babel-runtime@6.26.0@babel-runtime/helpers/typeof.js\nvar helpers_typeof = __webpack_require__(\"hRKE\");\nvar typeof_default = /*#__PURE__*/__webpack_require__.n(helpers_typeof);\n\n// CONCATENATED MODULE: ./src/assets/js/jquery.jcrop.js\n\n/**\n * jquery.Jcrop.js v0.9.12\n * jQuery Image Cropping Plugin - released under MIT License\n * Author: Kelly Hallman <khallman@gmail.com>\n * http://github.com/tapmodo/Jcrop\n * Copyright (c) 2008-2013 Tapmodo Interactive LLC {{{\n *\n * Permission is hereby granted, free of charge, to any person\n * obtaining a copy of this software and associated documentation\n * files (the \"Software\"), to deal in the Software without\n * restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following\n * conditions:\n *\n * The above copyright notice and this permission notice shall be\n * included in all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n * OTHER DEALINGS IN THE SOFTWARE.\n *\n * }}}\n */\n\n(function ($) {\n  $.Jcrop = function (obj, opt) {\n    var options = $.extend({}, $.Jcrop.defaults),\n        docOffset,\n        _ua = navigator.userAgent.toLowerCase(),\n        is_msie = /msie/.test(_ua),\n        ie6mode = /msie [1-6]\\./.test(_ua);\n\n    // Internal Methods {{{\n    function px(n) {\n      return Math.round(n) + 'px';\n    }\n    function cssClass(cl) {\n      return options.baseClass + '-' + cl;\n    }\n    function supportsColorFade() {\n      return $.fx.step.hasOwnProperty('backgroundColor');\n    }\n    function getPos(obj) // {{{\n    {\n      var pos = $(obj).offset();\n      return [pos.left, pos.top];\n    }\n    // }}}\n    function mouseAbs(e) // {{{\n    {\n      return [e.pageX - docOffset[0], e.pageY - docOffset[1]];\n    }\n    // }}}\n    function setOptions(opt) // {{{\n    {\n      if ((typeof opt === 'undefined' ? 'undefined' : typeof_default()(opt)) !== 'object') opt = {};\n      options = $.extend(options, opt);\n\n      $.each(['onChange', 'onSelect', 'onRelease', 'onDblClick'], function (i, e) {\n        if (typeof options[e] !== 'function') options[e] = function () {};\n      });\n    }\n    // }}}\n    function startDragMode(mode, pos, touch) // {{{\n    {\n      docOffset = getPos($img);\n      Tracker.setCursor(mode === 'move' ? mode : mode + '-resize');\n\n      if (mode === 'move') {\n        return Tracker.activateHandlers(createMover(pos), doneSelect, touch);\n      }\n\n      var fc = Coords.getFixed();\n      var opp = oppLockCorner(mode);\n      var opc = Coords.getCorner(oppLockCorner(opp));\n\n      Coords.setPressed(Coords.getCorner(opp));\n      Coords.setCurrent(opc);\n\n      Tracker.activateHandlers(dragmodeHandler(mode, fc), doneSelect, touch);\n    }\n    // }}}\n    function dragmodeHandler(mode, f) // {{{\n    {\n      return function (pos) {\n        if (!options.aspectRatio) {\n          switch (mode) {\n            case 'e':\n              pos[1] = f.y2;\n              break;\n            case 'w':\n              pos[1] = f.y2;\n              break;\n            case 'n':\n              pos[0] = f.x2;\n              break;\n            case 's':\n              pos[0] = f.x2;\n              break;\n          }\n        } else {\n          switch (mode) {\n            case 'e':\n              pos[1] = f.y + 1;\n              break;\n            case 'w':\n              pos[1] = f.y + 1;\n              break;\n            case 'n':\n              pos[0] = f.x + 1;\n              break;\n            case 's':\n              pos[0] = f.x + 1;\n              break;\n          }\n        }\n        Coords.setCurrent(pos);\n        Selection.update();\n      };\n    }\n    // }}}\n    function createMover(pos) // {{{\n    {\n      var lloc = pos;\n      KeyManager.watchKeys();\n\n      return function (pos) {\n        Coords.moveOffset([pos[0] - lloc[0], pos[1] - lloc[1]]);\n        lloc = pos;\n\n        Selection.update();\n      };\n    }\n    // }}}\n    function oppLockCorner(ord) // {{{\n    {\n      switch (ord) {\n        case 'n':\n          return 'sw';\n        case 's':\n          return 'nw';\n        case 'e':\n          return 'nw';\n        case 'w':\n          return 'ne';\n        case 'ne':\n          return 'sw';\n        case 'nw':\n          return 'se';\n        case 'se':\n          return 'nw';\n        case 'sw':\n          return 'ne';\n      }\n    }\n    // }}}\n    function createDragger(ord) // {{{\n    {\n      return function (e) {\n        if (options.disabled) {\n          return false;\n        }\n        if (ord === 'move' && !options.allowMove) {\n          return false;\n        }\n\n        // Fix position of crop area when dragged the very first time.\n        // Necessary when crop image is in a hidden element when page is loaded.\n        docOffset = getPos($img);\n\n        btndown = true;\n        startDragMode(ord, mouseAbs(e));\n        e.stopPropagation();\n        e.preventDefault();\n        return false;\n      };\n    }\n    // }}}\n    function presize($obj, w, h) // {{{\n    {\n      var nw = $obj.width(),\n          nh = $obj.height();\n      if (nw > w && w > 0) {\n        nw = w;\n        nh = w / $obj.width() * $obj.height();\n      }\n      if (nh > h && h > 0) {\n        nh = h;\n        nw = h / $obj.height() * $obj.width();\n      }\n      xscale = $obj.width() / nw;\n      yscale = $obj.height() / nh;\n      $obj.width(nw).height(nh);\n    }\n    // }}}\n    function unscale(c) // {{{\n    {\n      return {\n        x: c.x * xscale,\n        y: c.y * yscale,\n        x2: c.x2 * xscale,\n        y2: c.y2 * yscale,\n        w: c.w * xscale,\n        h: c.h * yscale\n      };\n    }\n    // }}}\n    function doneSelect(pos) // {{{\n    {\n      var c = Coords.getFixed();\n      if (c.w > options.minSelect[0] && c.h > options.minSelect[1]) {\n        Selection.enableHandles();\n        Selection.done();\n      } else {\n        Selection.release();\n      }\n      Tracker.setCursor(options.allowSelect ? 'crosshair' : 'default');\n    }\n    // }}}\n    function _newSelection(e) // {{{\n    {\n      if (options.disabled) {\n        return;\n      }\n      if (!options.allowSelect) {\n        return;\n      }\n      btndown = true;\n      docOffset = getPos($img);\n      Selection.disableHandles();\n      Tracker.setCursor('crosshair');\n      var pos = mouseAbs(e);\n      Coords.setPressed(pos);\n      Selection.update();\n      Tracker.activateHandlers(selectDrag, doneSelect, e.type.substring(0, 5) === 'touch');\n      KeyManager.watchKeys();\n\n      e.stopPropagation();\n      e.preventDefault();\n      return false;\n    }\n    // }}}\n    function selectDrag(pos) // {{{\n    {\n      Coords.setCurrent(pos);\n      Selection.update();\n    }\n    // }}}\n    function newTracker() // {{{\n    {\n      var trk = $('<div></div>').addClass(cssClass('tracker'));\n      if (is_msie) {\n        trk.css({\n          opacity: 0,\n          backgroundColor: 'white'\n        });\n      }\n      return trk;\n    }\n    // }}}\n\n    // }}}\n    // Initialization {{{\n    // Sanitize some options {{{\n    if ((typeof obj === 'undefined' ? 'undefined' : typeof_default()(obj)) !== 'object') {\n      obj = $(obj)[0];\n    }\n    if ((typeof opt === 'undefined' ? 'undefined' : typeof_default()(opt)) !== 'object') {\n      opt = {};\n    }\n    // }}}\n    setOptions(opt);\n    // Initialize some jQuery objects {{{\n    // The values are SET on the image(s) for the interface\n    // If the original image has any of these set, they will be reset\n    // However, if you destroy() the Jcrop instance the original image's\n    // character in the DOM will be as you left it.\n    var img_css = {\n      border: 'none',\n      visibility: 'visible',\n      margin: 0,\n      padding: 0,\n      position: 'absolute',\n      top: 0,\n      left: 0\n    };\n\n    var $origimg = $(obj),\n        img_mode = true;\n    if (obj.tagName == 'IMG') {\n      // Fix size of crop image.\n      // Necessary when crop image is within a hidden element when page is loaded.\n      if ($origimg[0].width != 0 && $origimg[0].height != 0) {\n        // Obtain dimensions from contained img element.\n        $origimg.width($origimg[0].width);\n        $origimg.height($origimg[0].height);\n      } else {\n        // Obtain dimensions from temporary image in case the original is not loaded yet (e.g. IE 7.0).\n        var tempImage = new Image();\n        tempImage.src = $origimg[0].src;\n        $origimg.width(tempImage.width);\n        $origimg.height(tempImage.height);\n      }\n\n      var $img = $origimg.clone().removeAttr('id').css(img_css).show();\n      $img.width($origimg.width());\n      $img.height($origimg.height());\n      $origimg.after($img).hide();\n    } else {\n      $img = $origimg.css(img_css).show();\n      img_mode = false;\n      if (options.shade === null) {\n        options.shade = true;\n      }\n    }\n\n    presize($img, options.boxWidth, options.boxHeight);\n\n    var boundx = $img.width(),\n        boundy = $img.height(),\n        $div = $('<div />').width(boundx).height(boundy).addClass(cssClass('holder')).css({\n      position: 'relative',\n      backgroundColor: options.bgColor\n    }).insertAfter($origimg).append($img);\n\n    if (options.addClass) {\n      $div.addClass(options.addClass);\n    }\n\n    var $img2 = $('<div />'),\n        $img_holder = $('<div />').width('100%').height('100%').css({\n      zIndex: 310,\n      position: 'absolute',\n      overflow: 'hidden'\n    }),\n        $hdl_holder = $('<div />').width('100%').height('100%').css('zIndex', 320),\n        $sel = $('<div />').css({\n      position: 'absolute',\n      zIndex: 600\n    }).dblclick(function () {\n      var c = Coords.getFixed();\n      options.onDblClick.call(api, c);\n    }).insertBefore($img).append($img_holder, $hdl_holder);\n\n    if (img_mode) {\n      $img2 = $('<img />').attr('src', $img.attr('src')).css(img_css).width(boundx).height(boundy);\n      $img_holder.append($img2);\n    }\n\n    if (ie6mode) {\n      $sel.css({\n        overflowY: 'hidden'\n      });\n    }\n\n    var bound = options.boundary;\n    var $trk = newTracker().width(boundx + bound * 2).height(boundy + bound * 2).css({\n      position: 'absolute',\n      top: px(-bound),\n      left: px(-bound),\n      zIndex: 290\n    }).mousedown(_newSelection);\n\n    /* }}} */\n    // Set more variables {{{\n    var bgcolor = options.bgColor,\n        bgopacity = options.bgOpacity,\n        xlimit,\n        ylimit,\n        xmin,\n        ymin,\n        xscale,\n        yscale,\n        enabled = true,\n        btndown,\n        animating,\n        shift_down;\n\n    docOffset = getPos($img);\n    // }}}\n    // }}}\n    // Internal Modules {{{\n    // Touch Module {{{\n    var Touch = function () {\n      // Touch support detection function adapted (under MIT License)\n      // from code by Jeffrey Sambells - http://github.com/iamamused/\n      function hasTouchSupport() {\n        var support = {},\n            events = ['touchstart', 'touchmove', 'touchend'],\n            el = document.createElement('div'),\n            i;\n\n        try {\n          for (i = 0; i < events.length; i++) {\n            var eventName = events[i];\n            eventName = 'on' + eventName;\n            var isSupported = eventName in el;\n            if (!isSupported) {\n              el.setAttribute(eventName, 'return;');\n              isSupported = typeof el[eventName] === 'function';\n            }\n            support[events[i]] = isSupported;\n          }\n          return support.touchstart && support.touchend && support.touchmove;\n        } catch (err) {\n          return false;\n        }\n      }\n\n      function detectSupport() {\n        if (options.touchSupport === true || options.touchSupport === false) return options.touchSupport;else return hasTouchSupport();\n      }\n      return {\n        createDragger: function createDragger(ord) {\n          return function (e) {\n            if (options.disabled) {\n              return false;\n            }\n            if (ord === 'move' && !options.allowMove) {\n              return false;\n            }\n            docOffset = getPos($img);\n            btndown = true;\n            startDragMode(ord, mouseAbs(Touch.cfilter(e)), true);\n            e.stopPropagation();\n            e.preventDefault();\n            return false;\n          };\n        },\n        newSelection: function newSelection(e) {\n          return _newSelection(Touch.cfilter(e));\n        },\n        cfilter: function cfilter(e) {\n          e.pageX = e.originalEvent.changedTouches[0].pageX;\n          e.pageY = e.originalEvent.changedTouches[0].pageY;\n          return e;\n        },\n        isSupported: hasTouchSupport,\n        support: detectSupport()\n      };\n    }();\n    // }}}\n    // Coords Module {{{\n    var Coords = function () {\n      var x1 = 0,\n          y1 = 0,\n          x2 = 0,\n          y2 = 0,\n          ox,\n          oy;\n\n      function setPressed(pos) // {{{\n      {\n        pos = rebound(pos);\n        x2 = x1 = pos[0];\n        y2 = y1 = pos[1];\n      }\n      // }}}\n      function setCurrent(pos) // {{{\n      {\n        pos = rebound(pos);\n        ox = pos[0] - x2;\n        oy = pos[1] - y2;\n        x2 = pos[0];\n        y2 = pos[1];\n      }\n      // }}}\n      function getOffset() // {{{\n      {\n        return [ox, oy];\n      }\n      // }}}\n      function moveOffset(offset) // {{{\n      {\n        var ox = offset[0],\n            oy = offset[1];\n\n        if (x1 + ox < 0) {\n          ox -= ox + x1;\n        }\n        if (y1 + oy < 0) {\n          oy -= oy + y1;\n        }\n\n        if (boundy < y2 + oy) {\n          oy += boundy - (y2 + oy);\n        }\n        if (boundx < x2 + ox) {\n          ox += boundx - (x2 + ox);\n        }\n\n        x1 += ox;\n        x2 += ox;\n        y1 += oy;\n        y2 += oy;\n      }\n      // }}}\n      function getCorner(ord) // {{{\n      {\n        var c = getFixed();\n        switch (ord) {\n          case 'ne':\n            return [c.x2, c.y];\n          case 'nw':\n            return [c.x, c.y];\n          case 'se':\n            return [c.x2, c.y2];\n          case 'sw':\n            return [c.x, c.y2];\n        }\n      }\n      // }}}\n      function getFixed() // {{{\n      {\n        if (!options.aspectRatio) {\n          return getRect();\n        }\n        // This function could use some optimization I think...\n        var aspect = options.aspectRatio,\n            min_x = options.minSize[0] / xscale,\n\n\n        // min_y = options.minSize[1]/yscale,\n        max_x = options.maxSize[0] / xscale,\n            max_y = options.maxSize[1] / yscale,\n            rw = x2 - x1,\n            rh = y2 - y1,\n            rwa = Math.abs(rw),\n            rha = Math.abs(rh),\n            real_ratio = rwa / rha,\n            xx,\n            yy,\n            w,\n            h;\n\n        if (max_x === 0) {\n          max_x = boundx * 10;\n        }\n        if (max_y === 0) {\n          max_y = boundy * 10;\n        }\n        if (real_ratio < aspect) {\n          yy = y2;\n          w = rha * aspect;\n          xx = rw < 0 ? x1 - w : w + x1;\n\n          if (xx < 0) {\n            xx = 0;\n            h = Math.abs((xx - x1) / aspect);\n            yy = rh < 0 ? y1 - h : h + y1;\n          } else if (xx > boundx) {\n            xx = boundx;\n            h = Math.abs((xx - x1) / aspect);\n            yy = rh < 0 ? y1 - h : h + y1;\n          }\n        } else {\n          xx = x2;\n          h = rwa / aspect;\n          yy = rh < 0 ? y1 - h : y1 + h;\n          if (yy < 0) {\n            yy = 0;\n            w = Math.abs((yy - y1) * aspect);\n            xx = rw < 0 ? x1 - w : w + x1;\n          } else if (yy > boundy) {\n            yy = boundy;\n            w = Math.abs(yy - y1) * aspect;\n            xx = rw < 0 ? x1 - w : w + x1;\n          }\n        }\n\n        // Magic %-)\n        if (xx > x1) {\n          // right side\n          if (xx - x1 < min_x) {\n            xx = x1 + min_x;\n          } else if (xx - x1 > max_x) {\n            xx = x1 + max_x;\n          }\n          if (yy > y1) {\n            yy = y1 + (xx - x1) / aspect;\n          } else {\n            yy = y1 - (xx - x1) / aspect;\n          }\n        } else if (xx < x1) {\n          // left side\n          if (x1 - xx < min_x) {\n            xx = x1 - min_x;\n          } else if (x1 - xx > max_x) {\n            xx = x1 - max_x;\n          }\n          if (yy > y1) {\n            yy = y1 + (x1 - xx) / aspect;\n          } else {\n            yy = y1 - (x1 - xx) / aspect;\n          }\n        }\n\n        if (xx < 0) {\n          x1 -= xx;\n          xx = 0;\n        } else if (xx > boundx) {\n          x1 -= xx - boundx;\n          xx = boundx;\n        }\n\n        if (yy < 0) {\n          y1 -= yy;\n          yy = 0;\n        } else if (yy > boundy) {\n          y1 -= yy - boundy;\n          yy = boundy;\n        }\n\n        return makeObj(flipCoords(x1, y1, xx, yy));\n      }\n      // }}}\n      function rebound(p) // {{{\n      {\n        if (p[0] < 0) p[0] = 0;\n        if (p[1] < 0) p[1] = 0;\n\n        if (p[0] > boundx) p[0] = boundx;\n        if (p[1] > boundy) p[1] = boundy;\n\n        return [Math.round(p[0]), Math.round(p[1])];\n      }\n      // }}}\n      function flipCoords(x1, y1, x2, y2) // {{{\n      {\n        var xa = x1,\n            xb = x2,\n            ya = y1,\n            yb = y2;\n        if (x2 < x1) {\n          xa = x2;\n          xb = x1;\n        }\n        if (y2 < y1) {\n          ya = y2;\n          yb = y1;\n        }\n        return [xa, ya, xb, yb];\n      }\n      // }}}\n      function getRect() // {{{\n      {\n        var xsize = x2 - x1,\n            ysize = y2 - y1,\n            delta;\n\n        if (xlimit && Math.abs(xsize) > xlimit) {\n          x2 = xsize > 0 ? x1 + xlimit : x1 - xlimit;\n        }\n        if (ylimit && Math.abs(ysize) > ylimit) {\n          y2 = ysize > 0 ? y1 + ylimit : y1 - ylimit;\n        }\n\n        if (ymin / yscale && Math.abs(ysize) < ymin / yscale) {\n          y2 = ysize > 0 ? y1 + ymin / yscale : y1 - ymin / yscale;\n        }\n        if (xmin / xscale && Math.abs(xsize) < xmin / xscale) {\n          x2 = xsize > 0 ? x1 + xmin / xscale : x1 - xmin / xscale;\n        }\n\n        if (x1 < 0) {\n          x2 -= x1;\n          x1 -= x1;\n        }\n        if (y1 < 0) {\n          y2 -= y1;\n          y1 -= y1;\n        }\n        if (x2 < 0) {\n          x1 -= x2;\n          x2 -= x2;\n        }\n        if (y2 < 0) {\n          y1 -= y2;\n          y2 -= y2;\n        }\n        if (x2 > boundx) {\n          delta = x2 - boundx;\n          x1 -= delta;\n          x2 -= delta;\n        }\n        if (y2 > boundy) {\n          delta = y2 - boundy;\n          y1 -= delta;\n          y2 -= delta;\n        }\n        if (x1 > boundx) {\n          delta = x1 - boundy;\n          y2 -= delta;\n          y1 -= delta;\n        }\n        if (y1 > boundy) {\n          delta = y1 - boundy;\n          y2 -= delta;\n          y1 -= delta;\n        }\n\n        return makeObj(flipCoords(x1, y1, x2, y2));\n      }\n      // }}}\n      function makeObj(a) // {{{\n      {\n        return {\n          x: a[0],\n          y: a[1],\n          x2: a[2],\n          y2: a[3],\n          w: a[2] - a[0],\n          h: a[3] - a[1]\n        };\n      }\n      // }}}\n\n      return {\n        flipCoords: flipCoords,\n        setPressed: setPressed,\n        setCurrent: setCurrent,\n        getOffset: getOffset,\n        moveOffset: moveOffset,\n        getCorner: getCorner,\n        getFixed: getFixed\n      };\n    }();\n\n    // }}}\n    // Shade Module {{{\n    var Shade = function () {\n      var enabled = false,\n          holder = $('<div />').css({\n        position: 'absolute',\n        zIndex: 240,\n        opacity: 0\n      }),\n          shades = {\n        top: createShade(),\n        left: createShade().height(boundy),\n        right: createShade().height(boundy),\n        bottom: createShade()\n      };\n\n      function resizeShades(w, h) {\n        shades.left.css({ height: px(h) });\n        shades.right.css({ height: px(h) });\n      }\n      function updateAuto() {\n        return updateShade(Coords.getFixed());\n      }\n      function updateShade(c) {\n        shades.top.css({\n          left: px(c.x),\n          width: px(c.w),\n          height: px(c.y)\n        });\n        shades.bottom.css({\n          top: px(c.y2),\n          left: px(c.x),\n          width: px(c.w),\n          height: px(boundy - c.y2)\n        });\n        shades.right.css({\n          left: px(c.x2),\n          width: px(boundx - c.x2)\n        });\n        shades.left.css({\n          width: px(c.x)\n        });\n      }\n      function createShade() {\n        return $('<div />').css({\n          position: 'absolute',\n          backgroundColor: options.shadeColor || options.bgColor\n        }).appendTo(holder);\n      }\n      function enableShade() {\n        if (!enabled) {\n          enabled = true;\n          holder.insertBefore($img);\n          updateAuto();\n          Selection.setBgOpacity(1, 0, 1);\n          $img2.hide();\n\n          setBgColor(options.shadeColor || options.bgColor, 1);\n          if (Selection.isAwake()) {\n            setOpacity(options.bgOpacity, 1);\n          } else setOpacity(1, 1);\n        }\n      }\n      function setBgColor(color, now) {\n        colorChangeMacro(getShades(), color, now);\n      }\n      function disableShade() {\n        if (enabled) {\n          holder.remove();\n          $img2.show();\n          enabled = false;\n          if (Selection.isAwake()) {\n            Selection.setBgOpacity(options.bgOpacity, 1, 1);\n          } else {\n            Selection.setBgOpacity(1, 1, 1);\n            Selection.disableHandles();\n          }\n          colorChangeMacro($div, 0, 1);\n        }\n      }\n      function setOpacity(opacity, now) {\n        if (enabled) {\n          if (options.bgFade && !now) {\n            holder.animate({\n              opacity: 1 - opacity\n            }, {\n              queue: false,\n              duration: options.fadeTime\n            });\n          } else holder.css({ opacity: 1 - opacity });\n        }\n      }\n      function refreshAll() {\n        options.shade ? enableShade() : disableShade();\n        if (Selection.isAwake()) setOpacity(options.bgOpacity);\n      }\n      function getShades() {\n        return holder.children();\n      }\n\n      return {\n        update: updateAuto,\n        updateRaw: updateShade,\n        getShades: getShades,\n        setBgColor: setBgColor,\n        enable: enableShade,\n        disable: disableShade,\n        resize: resizeShades,\n        refresh: refreshAll,\n        opacity: setOpacity\n      };\n    }();\n    // }}}\n    // Selection Module {{{\n    var Selection = function () {\n      var awake,\n          hdep = 370,\n          borders = {},\n          handle = {},\n          dragbar = {},\n          seehandles = false;\n\n      // Private Methods\n      function insertBorder(type) // {{{\n      {\n        var jq = $('<div />').css({\n          position: 'absolute',\n          opacity: options.borderOpacity\n        }).addClass(cssClass(type));\n        $img_holder.append(jq);\n        return jq;\n      }\n      // }}}\n      function dragDiv(ord, zi) // {{{\n      {\n        var jq = $('<div />').mousedown(createDragger(ord)).css({\n          cursor: ord + '-resize',\n          position: 'absolute',\n          zIndex: zi\n        }).addClass('ord-' + ord);\n\n        if (Touch.support) {\n          jq.bind('touchstart.jcrop', Touch.createDragger(ord));\n        }\n\n        $hdl_holder.append(jq);\n        return jq;\n      }\n      // }}}\n      function insertHandle(ord) // {{{\n      {\n        var hs = options.handleSize,\n            div = dragDiv(ord, hdep++).css({\n          opacity: options.handleOpacity\n        }).addClass(cssClass('handle'));\n\n        if (hs) {\n          div.width(hs).height(hs);\n        }\n\n        return div;\n      }\n      // }}}\n      function insertDragbar(ord) // {{{\n      {\n        return dragDiv(ord, hdep++).addClass('jcrop-dragbar');\n      }\n      // }}}\n      function createDragbars(li) // {{{\n      {\n        var i;\n        for (i = 0; i < li.length; i++) {\n          dragbar[li[i]] = insertDragbar(li[i]);\n        }\n      }\n      // }}}\n      function createBorders(li) // {{{\n      {\n        var cl, i;\n        for (i = 0; i < li.length; i++) {\n          switch (li[i]) {\n            case 'n':\n              cl = 'hline';break;\n            case 's':\n              cl = 'hline bottom';break;\n            case 'e':\n              cl = 'vline right';break;\n            case 'w':\n              cl = 'vline';break;\n          }\n          borders[li[i]] = insertBorder(cl);\n        }\n      }\n      // }}}\n      function createHandles(li) // {{{\n      {\n        var i;\n        for (i = 0; i < li.length; i++) {\n          handle[li[i]] = insertHandle(li[i]);\n        }\n      }\n      // }}}\n      function moveto(x, y) // {{{\n      {\n        if (!options.shade) {\n          $img2.css({\n            top: px(-y),\n            left: px(-x)\n          });\n        }\n        $sel.css({\n          top: px(y),\n          left: px(x)\n        });\n      }\n      // }}}\n      function resize(w, h) // {{{\n      {\n        $sel.width(Math.round(w)).height(Math.round(h));\n      }\n      // }}}\n      function refresh() // {{{\n      {\n        var c = Coords.getFixed();\n\n        Coords.setPressed([c.x, c.y]);\n        Coords.setCurrent([c.x2, c.y2]);\n\n        updateVisible();\n      }\n      // }}}\n\n      // Internal Methods\n      function updateVisible(select) // {{{\n      {\n        if (awake) {\n          return update(select);\n        }\n      }\n      // }}}\n      function update(select) // {{{\n      {\n        var c = Coords.getFixed();\n\n        resize(c.w, c.h);\n        moveto(c.x, c.y);\n        if (options.shade) Shade.updateRaw(c);\n\n        awake || show();\n\n        if (select) {\n          options.onSelect.call(api, unscale(c));\n        } else {\n          options.onChange.call(api, unscale(c));\n        }\n      }\n      // }}}\n      function setBgOpacity(opacity, force, now) // {{{\n      {\n        if (!awake && !force) return;\n        if (options.bgFade && !now) {\n          $img.animate({\n            opacity: opacity\n          }, {\n            queue: false,\n            duration: options.fadeTime\n          });\n        } else {\n          $img.css('opacity', opacity);\n        }\n      }\n      // }}}\n      function show() // {{{\n      {\n        $sel.show();\n\n        if (options.shade) Shade.opacity(bgopacity);else setBgOpacity(bgopacity, true);\n\n        awake = true;\n      }\n      // }}}\n      function release() // {{{\n      {\n        disableHandles();\n        $sel.hide();\n\n        if (options.shade) Shade.opacity(1);else setBgOpacity(1);\n\n        awake = false;\n        options.onRelease.call(api);\n      }\n      // }}}\n      function showHandles() // {{{\n      {\n        if (seehandles) {\n          $hdl_holder.show();\n        }\n      }\n      // }}}\n      function enableHandles() // {{{\n      {\n        seehandles = true;\n        if (options.allowResize) {\n          $hdl_holder.show();\n          return true;\n        }\n      }\n      // }}}\n      function disableHandles() // {{{\n      {\n        seehandles = false;\n        $hdl_holder.hide();\n      }\n      // }}}\n      function animMode(v) // {{{\n      {\n        if (v) {\n          animating = true;\n          disableHandles();\n        } else {\n          animating = false;\n          enableHandles();\n        }\n      }\n      // }}}\n      function done() // {{{\n      {\n        animMode(false);\n        refresh();\n      }\n      // }}}\n      // Insert draggable elements {{{\n      // Insert border divs for outline\n\n      if (options.dragEdges && $.isArray(options.createDragbars)) {\n        createDragbars(options.createDragbars);\n      }\n\n      if ($.isArray(options.createHandles)) {\n        createHandles(options.createHandles);\n      }\n\n      if (options.drawBorders && $.isArray(options.createBorders)) {\n        createBorders(options.createBorders);\n      }\n\n      // }}}\n\n      // This is a hack for iOS5 to support drag/move touch functionality\n      $(document).bind('touchstart.jcrop-ios', function (e) {\n        if ($(e.currentTarget).hasClass('jcrop-tracker')) e.stopPropagation();\n      });\n\n      var $track = newTracker().mousedown(createDragger('move')).css({\n        cursor: 'move',\n        position: 'absolute',\n        zIndex: 360\n      });\n\n      if (Touch.support) {\n        $track.bind('touchstart.jcrop', Touch.createDragger('move'));\n      }\n\n      $img_holder.append($track);\n      disableHandles();\n\n      return {\n        updateVisible: updateVisible,\n        update: update,\n        release: release,\n        refresh: refresh,\n        isAwake: function isAwake() {\n          return awake;\n        },\n        setCursor: function setCursor(cursor) {\n          $track.css('cursor', cursor);\n        },\n        enableHandles: enableHandles,\n        enableOnly: function enableOnly() {\n          seehandles = true;\n        },\n        showHandles: showHandles,\n        disableHandles: disableHandles,\n        animMode: animMode,\n        setBgOpacity: setBgOpacity,\n        done: done\n      };\n    }();\n\n    // }}}\n    // Tracker Module {{{\n    var Tracker = function () {\n      var onMove = function onMove() {},\n          onDone = function onDone() {},\n          trackDoc = options.trackDocument;\n\n      function toFront(touch) // {{{\n      {\n        $trk.css({\n          zIndex: 450\n        });\n\n        if (touch) {\n          $(document).bind('touchmove.jcrop', trackTouchMove).bind('touchend.jcrop', trackTouchEnd);\n        } else if (trackDoc) {\n          $(document).bind('mousemove.jcrop', trackMove).bind('mouseup.jcrop', trackUp);\n        }\n      }\n      // }}}\n      function toBack() // {{{\n      {\n        $trk.css({\n          zIndex: 290\n        });\n        $(document).unbind('.jcrop');\n      }\n      // }}}\n      function trackMove(e) // {{{\n      {\n        onMove(mouseAbs(e));\n        return false;\n      }\n      // }}}\n      function trackUp(e) // {{{\n      {\n        e.preventDefault();\n        e.stopPropagation();\n\n        if (btndown) {\n          btndown = false;\n\n          onDone(mouseAbs(e));\n\n          if (Selection.isAwake()) {\n            options.onSelect.call(api, unscale(Coords.getFixed()));\n          }\n\n          toBack();\n          onMove = function onMove() {};\n          onDone = function onDone() {};\n        }\n\n        return false;\n      }\n      // }}}\n      function activateHandlers(move, done, touch) // {{{\n      {\n        btndown = true;\n        onMove = move;\n        onDone = done;\n        toFront(touch);\n        return false;\n      }\n      // }}}\n      function trackTouchMove(e) // {{{\n      {\n        onMove(mouseAbs(Touch.cfilter(e)));\n        return false;\n      }\n      // }}}\n      function trackTouchEnd(e) // {{{\n      {\n        return trackUp(Touch.cfilter(e));\n      }\n      // }}}\n      function setCursor(t) // {{{\n      {\n        $trk.css('cursor', t);\n      }\n      // }}}\n\n      if (!trackDoc) {\n        $trk.mousemove(trackMove).mouseup(trackUp).mouseout(trackUp);\n      }\n\n      $img.before($trk);\n      return {\n        activateHandlers: activateHandlers,\n        setCursor: setCursor\n      };\n    }();\n    // }}}\n    // KeyManager Module {{{\n    var KeyManager = function () {\n      var $keymgr = $('<input type=\"radio\" />').css({\n        position: 'fixed',\n        left: '-120px',\n        width: '12px'\n      }).addClass('jcrop-keymgr'),\n          $keywrap = $('<div />').css({\n        position: 'absolute',\n        overflow: 'hidden'\n      }).append($keymgr);\n\n      function watchKeys() // {{{\n      {\n        if (options.keySupport) {\n          $keymgr.show();\n          $keymgr.focus();\n        }\n      }\n      // }}}\n      function onBlur(e) // {{{\n      {\n        $keymgr.hide();\n      }\n      // }}}\n      function doNudge(e, x, y) // {{{\n      {\n        if (options.allowMove) {\n          Coords.moveOffset([x, y]);\n          Selection.updateVisible(true);\n        }\n        e.preventDefault();\n        e.stopPropagation();\n      }\n      // }}}\n      function parseKey(e) // {{{\n      {\n        if (e.ctrlKey || e.metaKey) {\n          return true;\n        }\n        shift_down = !!e.shiftKey;\n        var nudge = shift_down ? 10 : 1;\n\n        switch (e.keyCode) {\n          case 37:\n            doNudge(e, -nudge, 0);\n            break;\n          case 39:\n            doNudge(e, nudge, 0);\n            break;\n          case 38:\n            doNudge(e, 0, -nudge);\n            break;\n          case 40:\n            doNudge(e, 0, nudge);\n            break;\n          case 27:\n            if (options.allowSelect) Selection.release();\n            break;\n          case 9:\n            return true;\n        }\n\n        return false;\n      }\n      // }}}\n\n      if (options.keySupport) {\n        $keymgr.keydown(parseKey).blur(onBlur);\n        if (ie6mode || !options.fixedSupport) {\n          $keymgr.css({\n            position: 'absolute',\n            left: '-20px'\n          });\n          $keywrap.append($keymgr).insertBefore($img);\n        } else {\n          $keymgr.insertBefore($img);\n        }\n      }\n\n      return {\n        watchKeys: watchKeys\n      };\n    }();\n    // }}}\n    // }}}\n    // API methods {{{\n    function setClass(cname) // {{{\n    {\n      $div.removeClass().addClass(cssClass('holder')).addClass(cname);\n    }\n    // }}}\n    function animateTo(a, callback) // {{{\n    {\n      var x1 = a[0] / xscale,\n          y1 = a[1] / yscale,\n          x2 = a[2] / xscale,\n          y2 = a[3] / yscale;\n\n      if (animating) {\n        return;\n      }\n\n      var animto = Coords.flipCoords(x1, y1, x2, y2),\n          c = Coords.getFixed(),\n          initcr = [c.x, c.y, c.x2, c.y2],\n          animat = initcr,\n          interv = options.animationDelay,\n          ix1 = animto[0] - initcr[0],\n          iy1 = animto[1] - initcr[1],\n          ix2 = animto[2] - initcr[2],\n          iy2 = animto[3] - initcr[3],\n          pcent = 0,\n          velocity = options.swingSpeed;\n\n      x1 = animat[0];\n      y1 = animat[1];\n      x2 = animat[2];\n      y2 = animat[3];\n\n      Selection.animMode(true);\n      var anim_timer;\n\n      function queueAnimator() {\n        window.setTimeout(animator, interv);\n      }\n      var animator = function () {\n        return function () {\n          pcent += (100 - pcent) / velocity;\n\n          animat[0] = Math.round(x1 + pcent / 100 * ix1);\n          animat[1] = Math.round(y1 + pcent / 100 * iy1);\n          animat[2] = Math.round(x2 + pcent / 100 * ix2);\n          animat[3] = Math.round(y2 + pcent / 100 * iy2);\n\n          if (pcent >= 99.8) {\n            pcent = 100;\n          }\n          if (pcent < 100) {\n            setSelectRaw(animat);\n            queueAnimator();\n          } else {\n            Selection.done();\n            Selection.animMode(false);\n            if (typeof callback === 'function') {\n              callback.call(api);\n            }\n          }\n        };\n      }();\n      queueAnimator();\n    }\n    // }}}\n    function setSelect(rect) // {{{\n    {\n      setSelectRaw([rect[0] / xscale, rect[1] / yscale, rect[2] / xscale, rect[3] / yscale]);\n      options.onSelect.call(api, unscale(Coords.getFixed()));\n      Selection.enableHandles();\n    }\n    // }}}\n    function setSelectRaw(l) // {{{\n    {\n      Coords.setPressed([l[0], l[1]]);\n      Coords.setCurrent([l[2], l[3]]);\n      Selection.update();\n    }\n    // }}}\n    function tellSelect() // {{{\n    {\n      return unscale(Coords.getFixed());\n    }\n    // }}}\n    function tellScaled() // {{{\n    {\n      return Coords.getFixed();\n    }\n    // }}}\n    function setOptionsNew(opt) // {{{\n    {\n      setOptions(opt);\n      interfaceUpdate();\n    }\n    // }}}\n    function disableCrop() // {{{\n    {\n      options.disabled = true;\n      Selection.disableHandles();\n      Selection.setCursor('default');\n      Tracker.setCursor('default');\n    }\n    // }}}\n    function enableCrop() // {{{\n    {\n      options.disabled = false;\n      interfaceUpdate();\n    }\n    // }}}\n    function cancelCrop() // {{{\n    {\n      Selection.done();\n      Tracker.activateHandlers(null, null);\n    }\n    // }}}\n    function destroy() // {{{\n    {\n      $div.remove();\n      $origimg.show();\n      $origimg.css('visibility', 'visible');\n      $(obj).removeData('Jcrop');\n    }\n    // }}}\n    function setImage(src, callback) // {{{\n    {\n      Selection.release();\n      disableCrop();\n      var img = new Image();\n      img.onload = function () {\n        var iw = img.width;\n        var ih = img.height;\n        var bw = options.boxWidth;\n        var bh = options.boxHeight;\n        // $img.context.style.width = boundx + 'px';\n        // $img.context.style.height = boundy + 'px';\n        $img.width(iw).height(ih);\n        $img.attr('src', src);\n        $img2.attr('src', src);\n        presize($img, bw, bh);\n        boundx = $img.width();\n        boundy = $img.height();\n\n        $img2.width(boundx).height(boundy);\n        $img2.css({ background: '#0f0' });\n        $trk.width(boundx + bound * 2).height(boundy + bound * 2);\n        $div.width(boundx).height(boundy);\n        Shade.resize(boundx, boundy);\n        enableCrop();\n        if (typeof callback === 'function') {\n          callback.call(api);\n        }\n      };\n      img.src = src;\n    }\n    // }}}\n    function colorChangeMacro($obj, color, now) {\n      var mycolor = color || options.bgColor;\n      if (options.bgFade && supportsColorFade() && options.fadeTime && !now) {\n        $obj.animate({\n          backgroundColor: mycolor\n        }, {\n          queue: false,\n          duration: options.fadeTime\n        });\n      } else {\n        $obj.css('backgroundColor', mycolor);\n      }\n    }\n    function interfaceUpdate(alt) // {{{\n    // This method tweaks the interface based on options object.\n    // Called when options are changed and at end of initialization.\n    {\n      if (options.allowResize) {\n        if (alt) {\n          Selection.enableOnly();\n        } else {\n          Selection.enableHandles();\n        }\n      } else {\n        Selection.disableHandles();\n      }\n\n      Tracker.setCursor(options.allowSelect ? 'crosshair' : 'default');\n      Selection.setCursor(options.allowMove ? 'move' : 'default');\n\n      if (options.hasOwnProperty('trueSize')) {\n        xscale = options.trueSize[0] / boundx;\n        yscale = options.trueSize[1] / boundy;\n      }\n\n      if (options.hasOwnProperty('setSelect')) {\n        setSelect(options.setSelect);\n        Selection.done();\n        delete options.setSelect;\n      }\n\n      Shade.refresh();\n\n      if (options.bgColor != bgcolor) {\n        colorChangeMacro(options.shade ? Shade.getShades() : $div, options.shade ? options.shadeColor || options.bgColor : options.bgColor);\n        bgcolor = options.bgColor;\n      }\n\n      if (bgopacity != options.bgOpacity) {\n        bgopacity = options.bgOpacity;\n        if (options.shade) Shade.refresh();else Selection.setBgOpacity(bgopacity);\n      }\n\n      xlimit = options.maxSize[0] || 0;\n      ylimit = options.maxSize[1] || 0;\n      xmin = options.minSize[0] || 0;\n      ymin = options.minSize[1] || 0;\n\n      if (options.hasOwnProperty('outerImage')) {\n        $img.attr('src', options.outerImage);\n        delete options.outerImage;\n      }\n\n      Selection.refresh();\n    }\n    // }}}\n    // }}}\n\n    if (Touch.support) $trk.bind('touchstart.jcrop', Touch.newSelection);\n\n    $hdl_holder.hide();\n    interfaceUpdate(true);\n\n    var api = {\n      setImage: setImage,\n      animateTo: animateTo,\n      setSelect: setSelect,\n      setOptions: setOptionsNew,\n      tellSelect: tellSelect,\n      tellScaled: tellScaled,\n      setClass: setClass,\n\n      disable: disableCrop,\n      enable: enableCrop,\n      cancel: cancelCrop,\n      release: Selection.release,\n      destroy: destroy,\n\n      focus: KeyManager.watchKeys,\n\n      getBounds: function getBounds() {\n        return [boundx * xscale, boundy * yscale];\n      },\n      getWidgetSize: function getWidgetSize() {\n        return [boundx, boundy];\n      },\n      getScaleFactor: function getScaleFactor() {\n        return [xscale, yscale];\n      },\n      getOptions: function getOptions() {\n        // careful: internal values are returned\n        return options;\n      },\n\n      ui: {\n        holder: $div,\n        selection: $sel\n      }\n    };\n\n    if (is_msie) $div.bind('selectstart', function () {\n      return false;\n    });\n\n    $origimg.data('Jcrop', api);\n    return api;\n  };\n  $.fn.Jcrop = function (options, callback) // {{{\n  {\n    var api;\n    // Iterate over each object, attach Jcrop\n    this.each(function () {\n      // If we've already attached to this object\n      if ($(this).data('Jcrop')) {\n        // The API can be requested this way (undocumented)\n        if (options === 'api') return $(this).data('Jcrop');\n        // Otherwise, we just reset the options...\n        else $(this).data('Jcrop').setOptions(options);\n      }\n      // If we haven't been attached, preload and attach\n      else {\n          if (this.tagName == 'IMG') {\n            $.Jcrop.Loader(this, function () {\n              $(this).css({ display: 'block', visibility: 'hidden' });\n              api = $.Jcrop(this, options);\n              if ($.isFunction(callback)) callback.call(api);\n            });\n          } else {\n            $(this).css({ display: 'block', visibility: 'hidden' });\n            api = $.Jcrop(this, options);\n            if ($.isFunction(callback)) callback.call(api);\n          }\n        }\n    });\n\n    // Return \"this\" so the object is chainable (jQuery-style)\n    return this;\n  };\n  // }}}\n  // $.Jcrop.Loader - basic image loader {{{\n\n  $.Jcrop.Loader = function (imgobj, success, error) {\n    var $img = $(imgobj),\n        img = $img[0];\n\n    function completeCheck() {\n      if (img.complete) {\n        $img.unbind('.jcloader');\n        if ($.isFunction(success)) success.call(img);\n      } else window.setTimeout(completeCheck, 50);\n    }\n\n    $img.bind('load.jcloader', completeCheck).bind('error.jcloader', function (e) {\n      $img.unbind('.jcloader');\n      if ($.isFunction(error)) error.call(img);\n    });\n\n    if (img.complete && $.isFunction(success)) {\n      $img.unbind('.jcloader');\n      success.call(img);\n    }\n  };\n\n  // }}}\n  // Global Defaults {{{\n  $.Jcrop.defaults = {\n\n    // Basic Settings\n    allowSelect: true,\n    allowMove: true,\n    allowResize: true,\n\n    trackDocument: true,\n\n    // Styling Options\n    baseClass: 'jcrop',\n    addClass: null,\n    bgColor: 'black',\n    bgOpacity: 0.6,\n    bgFade: false,\n    borderOpacity: 0.4,\n    handleOpacity: 0.5,\n    handleSize: null,\n\n    aspectRatio: 0,\n    keySupport: true,\n    createHandles: ['n', 's', 'e', 'w', 'nw', 'ne', 'se', 'sw'],\n    createDragbars: ['n', 's', 'e', 'w'],\n    createBorders: ['n', 's', 'e', 'w'],\n    drawBorders: true,\n    dragEdges: true,\n    fixedSupport: true,\n    touchSupport: null,\n\n    shade: null,\n\n    boxWidth: 0,\n    boxHeight: 0,\n    boundary: 2,\n    fadeTime: 400,\n    animationDelay: 20,\n    swingSpeed: 3,\n\n    minSelect: [0, 0],\n    maxSize: [0, 0],\n    minSize: [0, 0],\n\n    // Callbacks / Event Handlers\n    onChange: function onChange() {},\n    onSelect: function onSelect() {},\n    onDblClick: function onDblClick() {},\n    onRelease: function onRelease() {}\n\n    // }}}\n  };\n})(jQuery);\n// EXTERNAL MODULE: ./src/assets/css/jquery.jcrop.min.css\nvar jquery_jcrop_min = __webpack_require__(\"rxrk\");\nvar jquery_jcrop_min_default = /*#__PURE__*/__webpack_require__.n(jquery_jcrop_min);\n\n// CONCATENATED MODULE: ./node_modules/_babel-loader@7.1.4@babel-loader/lib!./node_modules/_vue-loader@14.2.2@vue-loader/lib/selector.js?type=script&index=0!./src/components/img_upload.vue\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n//   import $ from 'jquery'\n\n\n//   require('@/assets/js/jquery.jcrop.js');\n//   require('@/assets/css/jquery.jcrop.min.css');\n/* harmony default export */ var img_upload = ({\n  props: {\n    action: {\n      default: ''\n    },\n    aspectRatio: {\n      default: 1 / 1\n    },\n    width: {\n      default: 200\n    },\n    url: {\n      default: ''\n    },\n    maxSize: {\n      default: 2\n    },\n    acceptType: {\n      default: 'jpeg,jpg,png'\n    },\n    data: {},\n    sync: {\n      default: false\n    },\n    maxWidth: {\n      default: 600\n    },\n    title: {\n      default: ''\n    },\n    visible: {\n      default: false\n    }\n  },\n  data: function data() {\n    return {\n      img_url: this.url,\n      jcrop_api: '',\n      boundx: '',\n      boundy: '',\n      widget: [0, 0],\n      $preview: undefined,\n      $pcnt: undefined,\n      $pimg: undefined,\n      canvasOption: {},\n      icon_url: '',\n      pre_width: 0,\n      zoom: 1\n    };\n  },\n\n  methods: {\n    testMaxSize: function testMaxSize(file) {\n      var self = this;\n      var image = new Image();\n      if (file.files && file.files[0]) {\n        var fileData = file.files[0];\n        var size = fileData.size; //\n        var reader = new FileReader();\n        reader.onload = function (e) {\n          var data = e.target.result;\n          //\n\n          image.src = data;\n          image.onload = function () {\n            self.boundy = image.height;\n            self.boundx = image.width;\n            if (image.width > 5000 || image.height > 5000) {\n              $(\"#inputImage\").val('');\n              self.$message({ message: \"\", type: \"warning\" });\n              return false;\n            }\n            if (!size) {\n              self.$message({ message: '', type: 'warning' });\n            } else if (self.maxSize < size / (1024 * 1024)) {\n              self.$message({ message: \"\" + self.maxSize + 'M', type: 'warning' });\n              $(\"#inputImage\").val('');\n            } else if (self.acceptType.indexOf(file.files[0].type.split('/')[1].toLowerCase()) < 0) {\n              self.$message({ message: '' + self.acceptType + '', type: 'warning' });\n              $(\"#inputImage\").val('');\n            } else {\n              self.jcrop_api.setImage(data, function () {\n                self.widget = this.getWidgetSize();\n                this.setSelect([0, 0, 300, 300]);\n                $(\"#pre-picture\").parent().css({\n                  position: 'absolute',\n                  width: self.widget[0] + 'px',\n                  marginLeft: '-' + self.widget[0] / 2 + 'px',\n                  marginTop: '-' + self.widget[1] / 2 + 'px'\n                });\n              });\n              self.img_url = data;\n              self.resetCrop();\n            }\n          };\n          image.onerror = function (e) {\n            self.$message({ message: '', type: 'error' });\n            $(\"#inputImage\").val('');\n            return false;\n          };\n        };\n        reader.readAsDataURL(fileData);\n      } else {\n        this.isIE();\n      }\n    },\n    subForm: function subForm() {\n      if (this.setCanvas(this.canvasOption)) {\n        this.syncUrl(this.icon_url);\n        if (this.sync) {\n          this.cancel();\n          return false;\n        } else {\n          this.submitImageFile();\n        }\n      } else {\n        this.$message({ message: '', type: 'warning' });\n      }\n    },\n    submitImageFile: function submitImageFile(callback) {\n      var _this = this;\n\n      if (this.icon_url !== 'error') {\n        if (this.icon_url === '') {\n          return callback({ returnCode: 200 });\n        }\n        var formData = new FormData(); //form,FormData\n        //convertBase64UrlToBlobbase64Blob\n        //append,htmlinputname\n        // console.log(1, this.icon_url)\n        var blob = this.dataURLtoBlob(this.icon_url);\n        // console.log(blob)\n        formData.append('file', blob, 'avatar-image.png');\n\n        for (var k in this.data) {\n          formData.append(k, this.data[k]);\n        }\n        if (!this.sync) {\n          this.$myLoad('...');\n        }\n        //ajax form\n        $.ajax({\n          url: this.action,\n          type: \"post\",\n          data: formData,\n          dataType: \"text\",\n          processData: false, // jQuery\n          contentType: false, // jQueryContent-Type\n          success: function success(data) {\n            _this.$emit('success', JSON.parse(data));\n            if (!_this.sync) {\n              _this.cancel();\n              _this.$loading().close();\n              _this.$message({ message: JSON.parse(data).msg, type: 'success' });\n            } else {\n              callback(JSON.parse(data));\n            }\n          },\n          error: function error(err) {\n            _this.$loading().close();\n          },\n          xhr: function xhr() {\n            //jqueryajaxXMLHttpRequest\n            var xhr = new XMLHttpRequest();\n            xhr.upload.addEventListener(\"progress\", function (evt) {\n              if (evt.lengthComputable) {}\n            }, false);\n            return xhr;\n          }\n\n        });\n      } else {\n        this.$message({ message: '', type: 'warning' });\n      }\n    },\n    dataURLtoBlob: function dataURLtoBlob(dataurl) {\n      var arr = dataurl.split(','),\n          mime = arr[0].match(/:(.*?);/)[1],\n          bstr = atob(arr[1]),\n          n = bstr.length,\n          u8arr = new Uint8Array(n);\n      while (n--) {\n        u8arr[n] = bstr.charCodeAt(n);\n      }\n      var blob = new Blob([u8arr], { type: mime, filename: 'image.png' });\n      return blob;\n    },\n    resetCrop: function resetCrop() {\n      var self = this;\n      this.$preview = $('#preview-pane');\n      this.$pimg = $('#preview-pane .preview-container img');\n      $('#pre-picture').Jcrop({\n        bgFade: true,\n        // allowSelect:false,\n        boxHeight: 400,\n        boxWidth: 400,\n        onChange: this.updatePreview,\n        onSelect: this.updatePreview,\n        aspectRatio: this.aspectRatio\n      }, function () {\n        self.jcrop_api = this;\n        // Use the API to get the real image size\n        var bounds = this.getBounds();\n        self.widget = this.getWidgetSize();\n        self.boundx = bounds[0];\n        self.boundy = bounds[1];\n        this.setSelect([0, 0, 300, 200]);\n        $(\"#pre-picture\").parent().css({\n          position: 'absolute',\n          width: self.widget[0] + 'px',\n          marginLeft: '-' + self.widget[0] / 2 + 'px',\n          marginTop: '-' + self.widget[1] / 2 + 'px'\n        });\n        // Store the API in the jcrop_api variable\n      });\n    },\n    setCanvas: function setCanvas(op) {\n      var image_target = $('#preview-pane .preview-container img')[0];\n      // \n      var _img = document.createElement('img'),\n          z = 1;\n      _img.src = image_target.src;\n      // _img.setAttribute('crossOrigin', 'anonymous');\n      var crop_canvas = document.createElement('canvas');\n      this.zoom = _img.width / this.boundx;\n      if (op.w * this.zoom > this.maxWidth) {\n        z = this.maxWidth / (op.w * this.zoom);\n      }\n      crop_canvas.width = op.w * this.zoom * z;\n      crop_canvas.height = op.h * this.zoom * z;\n      try {\n        crop_canvas.getContext('2d').drawImage(image_target, op.x * this.zoom, op.y * this.zoom, op.w * this.zoom, op.h * this.zoom, 0, 0, op.w * this.zoom * z, op.h * this.zoom * z);\n        this.icon_url = crop_canvas.toDataURL();\n      } catch (err) {\n        return this.icon_url = 'error';\n      }\n      return this.icon_url;\n    },\n    changeImg: function changeImg(e) {\n      this.testMaxSize(e.target);\n    },\n    updatePreview: function updatePreview(c) {\n      if (parseInt(c.w) > 0) {\n        var rx = this.width / c.w;\n        var ry = this.width / this.aspectRatio / c.h;\n        this.canvasOption = c;\n        this.$pimg.css({\n          width: Math.round(rx * this.boundx) + 'px',\n          height: Math.round(ry * this.boundy) + 'px',\n          marginLeft: '-' + Math.round(rx * c.x) + 'px',\n          marginTop: '-' + Math.round(ry * c.y) + 'px'\n        });\n      }\n    },\n    isIE: function isIE() {\n      /*... ie9iframe*/\n      var userAgent = navigator.userAgent; //userAgent\n      var isIE = userAgent.indexOf(\"compatible\") > -1 && userAgent.indexOf(\"MSIE\") > -1; //IE<11\n      // var isEdge = userAgent.indexOf(\"Edge\") > -1 && !isIE; //IEEdge\n      if (isIE) {\n        var reIE = new RegExp(\"MSIE (\\\\d+\\\\.\\\\d+);\");\n        reIE.test(userAgent);\n        var fIEVersion = parseFloat(RegExp[\"$1\"]);\n        if (fIEVersion !== 10) {\n          this.$message({ message: 'ie', type: 'warning' });\n          return false;\n        }\n      }\n    },\n    cancel: function cancel() {\n      this.$emit('close', true);\n    },\n    syncUrl: function syncUrl(url) {\n      this.$emit('syncUrl', url);\n    }\n  },\n  mounted: function mounted() {\n    // Grab some information about the preview pane\n    //      let self = this;\n    //      this.$nextTick(()=>{\n    //        self.resetCrop(self.img_url)\n    //      });\n  },\n\n  watch: {\n    visible: function visible(val) {\n      var _this2 = this;\n\n      if (val) {\n        this.$nextTick(function () {\n          _this2.resetCrop(_this2.img_url);\n        });\n      }\n    }\n  }\n});\n// CONCATENATED MODULE: ./node_modules/_vue-loader@14.2.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-5f1391b5\",\"hasScoped\":false,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@14.2.2@vue-loader/lib/selector.js?type=template&index=0!./src/components/img_upload.vue\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.visible)?_c('div',{staticClass:\"picture-cropper-mode\"},[_c('div',{staticClass:\"picture-cropper-wrap\"},[_c('div',{staticClass:\"pc-inner-header\"},[_c('span',{staticClass:\"pc-header-title\"},[_vm._v(_vm._s(_vm.title))]),_vm._v(\" \"),_c('i',{staticClass:\"el-icon-close\",on:{\"click\":_vm.cancel}})]),_vm._v(\" \"),_c('div',{staticClass:\"pc-wrap-inner clear\"},[_c('div',{staticClass:\"wrap-container\"},[_c('div',{staticClass:\"pic-wrapper\"},[_c('img',{ref:\"pre-picture\",attrs:{\"src\":_vm.img_url,\"id\":\"pre-picture\",\"alt\":\"\"}})])]),_vm._v(\" \"),_c('div',{staticClass:\"pc-wrap-inner-right\",style:({ width:(_vm.width+20) + 'px' })},[_c('div',{style:({ height:_vm.width/_vm.aspectRatio + 'px',width:_vm.width + 'px' }),attrs:{\"id\":\"preview-pane\"}},[_c('div',{staticClass:\"preview-container\",style:({ height:_vm.width/_vm.aspectRatio + 'px',width:_vm.width + 'px' })},[_c('img',{staticClass:\"jcrop-preview\",attrs:{\"src\":_vm.img_url,\"alt\":\"Preview\"}})])]),_vm._v(\" \"),_vm._m(0)])]),_vm._v(\" \"),_c('div',{staticClass:\"pc-handle-wrap\"},[_c('form',{attrs:{\"id\":\"picture-form\",\"action\":\"\",\"enctype\":\"multipart/form-data\"}},[_c('label',{staticClass:\"btn-check-file\",attrs:{\"for\":\"inputImage\"}},[_c('input',{staticClass:\"btn-file\",attrs:{\"name\":\"file\",\"type\":\"file\",\"id\":\"inputImage\"},on:{\"change\":_vm.changeImg}}),_vm._v(\" \"),_c('span',[_vm._v(\"\")])])]),_vm._v(\" \"),_c('button',{staticClass:\"el-button el-button--primary\",on:{\"click\":_vm.subForm}},[_vm._v(_vm._s(_vm.sync?'':''))])])])]):_vm._e()}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"tip-msg\"},[_c('p',[_c('span',{staticClass:\"red\"},[_vm._v(\"\")]),_vm._v(\"360ie10\\n          \")])])}]\n\n// EXTERNAL MODULE: ./node_modules/_vue-loader@14.2.2@vue-loader/lib/runtime/component-normalizer.js\nvar component_normalizer = __webpack_require__(\"18Nq\");\n\n// CONCATENATED MODULE: ./src/components/img_upload.vue\nfunction injectStyle (context) {\n  __webpack_require__(\"4xxa\")\n}\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\n\nvar Component = Object(component_normalizer[\"a\" /* default */])(\n  img_upload,\n  render,\n  staticRenderFns,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ var components_img_upload = __webpack_exports__[\"default\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"rxrk\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/68.3cb1a8f3f4862b0ab203.js","function injectStyle (context) {\n  require(\"!!../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/_vue-loader@14.2.2@vue-loader/lib/style-compiler/index?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"scoped\\\":false,\\\"sourceMap\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../node_modules/_vue-loader@14.2.2@vue-loader/lib/selector?type=styles&index=0!./img_upload.vue\")\n}\n/* script */\nexport * from \"!!babel-loader!../../node_modules/_vue-loader@14.2.2@vue-loader/lib/selector?type=script&index=0!./img_upload.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/_vue-loader@14.2.2@vue-loader/lib/selector?type=script&index=0!./img_upload.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../node_modules/_vue-loader@14.2.2@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5f1391b5\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/_vue-loader@14.2.2@vue-loader/lib/selector?type=template&index=0!./img_upload.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../node_modules/_vue-loader@14.2.2@vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/img_upload.vue\n// module id = null\n// module chunks = ","/**\n * jquery.Jcrop.js v0.9.12\n * jQuery Image Cropping Plugin - released under MIT License\n * Author: Kelly Hallman <khallman@gmail.com>\n * http://github.com/tapmodo/Jcrop\n * Copyright (c) 2008-2013 Tapmodo Interactive LLC {{{\n *\n * Permission is hereby granted, free of charge, to any person\n * obtaining a copy of this software and associated documentation\n * files (the \"Software\"), to deal in the Software without\n * restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following\n * conditions:\n *\n * The above copyright notice and this permission notice shall be\n * included in all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n * OTHER DEALINGS IN THE SOFTWARE.\n *\n * }}}\n */\n\n(function($) {\n  $.Jcrop = function(obj, opt) {\n    var options = $.extend({}, $.Jcrop.defaults),\n      docOffset,\n      _ua = navigator.userAgent.toLowerCase(),\n      is_msie = /msie/.test(_ua),\n      ie6mode = /msie [1-6]\\./.test(_ua)\n\n    // Internal Methods {{{\n    function px(n) {\n      return Math.round(n) + 'px'\n    }\n    function cssClass(cl) {\n      return options.baseClass + '-' + cl\n    }\n    function supportsColorFade() {\n      return $.fx.step.hasOwnProperty('backgroundColor')\n    }\n    function getPos(obj) // {{{\n    {\n      var pos = $(obj).offset()\n      return [pos.left, pos.top]\n    }\n    // }}}\n    function mouseAbs(e) // {{{\n    {\n      return [(e.pageX - docOffset[0]), (e.pageY - docOffset[1])]\n    }\n    // }}}\n    function setOptions(opt) // {{{\n    {\n      if (typeof (opt) !== 'object') opt = {}\n      options = $.extend(options, opt)\n\n      $.each(['onChange', 'onSelect', 'onRelease', 'onDblClick'], function(i, e) {\n        if (typeof (options[e]) !== 'function') options[e] = function() {}\n      })\n    }\n    // }}}\n    function startDragMode(mode, pos, touch) // {{{\n    {\n      docOffset = getPos($img)\n      Tracker.setCursor(mode === 'move' ? mode : mode + '-resize')\n\n      if (mode === 'move') {\n        return Tracker.activateHandlers(createMover(pos), doneSelect, touch)\n      }\n\n      var fc = Coords.getFixed()\n      var opp = oppLockCorner(mode)\n      var opc = Coords.getCorner(oppLockCorner(opp))\n\n      Coords.setPressed(Coords.getCorner(opp))\n      Coords.setCurrent(opc)\n\n      Tracker.activateHandlers(dragmodeHandler(mode, fc), doneSelect, touch)\n    }\n    // }}}\n    function dragmodeHandler(mode, f) // {{{\n    {\n      return function(pos) {\n        if (!options.aspectRatio) {\n          switch (mode) {\n            case 'e':\n              pos[1] = f.y2\n              break\n            case 'w':\n              pos[1] = f.y2\n              break\n            case 'n':\n              pos[0] = f.x2\n              break\n            case 's':\n              pos[0] = f.x2\n              break\n          }\n        } else {\n          switch (mode) {\n            case 'e':\n              pos[1] = f.y + 1\n              break\n            case 'w':\n              pos[1] = f.y + 1\n              break\n            case 'n':\n              pos[0] = f.x + 1\n              break\n            case 's':\n              pos[0] = f.x + 1\n              break\n          }\n        }\n        Coords.setCurrent(pos)\n        Selection.update()\n      }\n    }\n    // }}}\n    function createMover(pos) // {{{\n    {\n      var lloc = pos\n      KeyManager.watchKeys()\n\n      return function(pos) {\n        Coords.moveOffset([pos[0] - lloc[0], pos[1] - lloc[1]])\n        lloc = pos\n\n        Selection.update()\n      }\n    }\n    // }}}\n    function oppLockCorner(ord) // {{{\n    {\n      switch (ord) {\n        case 'n':\n          return 'sw'\n        case 's':\n          return 'nw'\n        case 'e':\n          return 'nw'\n        case 'w':\n          return 'ne'\n        case 'ne':\n          return 'sw'\n        case 'nw':\n          return 'se'\n        case 'se':\n          return 'nw'\n        case 'sw':\n          return 'ne'\n      }\n    }\n    // }}}\n    function createDragger(ord) // {{{\n    {\n      return function(e) {\n        if (options.disabled) {\n          return false\n        }\n        if ((ord === 'move') && !options.allowMove) {\n          return false\n        }\n\n        // Fix position of crop area when dragged the very first time.\n        // Necessary when crop image is in a hidden element when page is loaded.\n        docOffset = getPos($img)\n\n        btndown = true\n        startDragMode(ord, mouseAbs(e))\n        e.stopPropagation()\n        e.preventDefault()\n        return false\n      }\n    }\n    // }}}\n    function presize($obj, w, h) // {{{\n    {\n      var nw = $obj.width(),\n        nh = $obj.height()\n      if ((nw > w) && w > 0) {\n        nw = w\n        nh = (w / $obj.width()) * $obj.height()\n      }\n      if ((nh > h) && h > 0) {\n        nh = h\n        nw = (h / $obj.height()) * $obj.width()\n      }\n      xscale = $obj.width() / nw\n      yscale = $obj.height() / nh\n      $obj.width(nw).height(nh)\n    }\n    // }}}\n    function unscale(c) // {{{\n    {\n      return {\n        x: c.x * xscale,\n        y: c.y * yscale,\n        x2: c.x2 * xscale,\n        y2: c.y2 * yscale,\n        w: c.w * xscale,\n        h: c.h * yscale\n      }\n    }\n    // }}}\n    function doneSelect(pos) // {{{\n    {\n      var c = Coords.getFixed()\n      if ((c.w > options.minSelect[0]) && (c.h > options.minSelect[1])) {\n        Selection.enableHandles()\n        Selection.done()\n      } else {\n        Selection.release()\n      }\n      Tracker.setCursor(options.allowSelect ? 'crosshair' : 'default')\n    }\n    // }}}\n    function newSelection(e) // {{{\n    {\n      if (options.disabled) {\n        return\n      }\n      if (!options.allowSelect) {\n        return\n      }\n      btndown = true\n      docOffset = getPos($img)\n      Selection.disableHandles()\n      Tracker.setCursor('crosshair')\n      var pos = mouseAbs(e)\n      Coords.setPressed(pos)\n      Selection.update()\n      Tracker.activateHandlers(selectDrag, doneSelect, e.type.substring(0, 5) === 'touch')\n      KeyManager.watchKeys()\n\n      e.stopPropagation()\n      e.preventDefault()\n      return false\n    }\n    // }}}\n    function selectDrag(pos) // {{{\n    {\n      Coords.setCurrent(pos)\n      Selection.update()\n    }\n    // }}}\n    function newTracker() // {{{\n    {\n      var trk = $('<div></div>').addClass(cssClass('tracker'))\n      if (is_msie) {\n        trk.css({\n          opacity: 0,\n          backgroundColor: 'white'\n        })\n      }\n      return trk\n    }\n    // }}}\n\n    // }}}\n    // Initialization {{{\n    // Sanitize some options {{{\n    if (typeof (obj) !== 'object') {\n      obj = $(obj)[0]\n    }\n    if (typeof (opt) !== 'object') {\n      opt = {}\n    }\n    // }}}\n    setOptions(opt)\n    // Initialize some jQuery objects {{{\n    // The values are SET on the image(s) for the interface\n    // If the original image has any of these set, they will be reset\n    // However, if you destroy() the Jcrop instance the original image's\n    // character in the DOM will be as you left it.\n    var img_css = {\n      border: 'none',\n      visibility: 'visible',\n      margin: 0,\n      padding: 0,\n      position: 'absolute',\n      top: 0,\n      left: 0\n    }\n\n    var $origimg = $(obj),\n      img_mode = true\n    if (obj.tagName == 'IMG') {\n      // Fix size of crop image.\n      // Necessary when crop image is within a hidden element when page is loaded.\n      if ($origimg[0].width != 0 && $origimg[0].height != 0) {\n        // Obtain dimensions from contained img element.\n        $origimg.width($origimg[0].width)\n        $origimg.height($origimg[0].height)\n      } else {\n        // Obtain dimensions from temporary image in case the original is not loaded yet (e.g. IE 7.0).\n        var tempImage = new Image()\n        tempImage.src = $origimg[0].src\n        $origimg.width(tempImage.width)\n        $origimg.height(tempImage.height)\n      }\n\n      var $img = $origimg.clone().removeAttr('id').css(img_css).show()\n      $img.width($origimg.width())\n      $img.height($origimg.height())\n      $origimg.after($img).hide()\n    } else {\n      $img = $origimg.css(img_css).show()\n      img_mode = false\n      if (options.shade === null) { options.shade = true }\n    }\n\n    presize($img, options.boxWidth, options.boxHeight)\n\n    var boundx = $img.width(),\n      boundy = $img.height(),\n\n      $div = $('<div />').width(boundx).height(boundy).addClass(cssClass('holder')).css({\n        position: 'relative',\n        backgroundColor: options.bgColor\n      }).insertAfter($origimg).append($img)\n\n    if (options.addClass) {\n      $div.addClass(options.addClass)\n    }\n\n    var $img2 = $('<div />'),\n\n      $img_holder = $('<div />')\n        .width('100%').height('100%').css({\n          zIndex: 310,\n          position: 'absolute',\n          overflow: 'hidden'\n        }),\n\n      $hdl_holder = $('<div />')\n        .width('100%').height('100%').css('zIndex', 320),\n\n      $sel = $('<div />')\n        .css({\n          position: 'absolute',\n          zIndex: 600\n        }).dblclick(function() {\n          var c = Coords.getFixed()\n          options.onDblClick.call(api, c)\n        }).insertBefore($img).append($img_holder, $hdl_holder)\n\n    if (img_mode) {\n      $img2 = $('<img />')\n          .attr('src', $img.attr('src')).css(img_css).width(boundx).height(boundy)\n      $img_holder.append($img2)\n    }\n\n    if (ie6mode) {\n      $sel.css({\n        overflowY: 'hidden'\n      })\n    }\n\n    var bound = options.boundary\n    var $trk = newTracker().width(boundx + (bound * 2)).height(boundy + (bound * 2)).css({\n      position: 'absolute',\n      top: px(-bound),\n      left: px(-bound),\n      zIndex: 290\n    }).mousedown(newSelection)\n\n    /* }}} */\n    // Set more variables {{{\n    var bgcolor = options.bgColor,\n      bgopacity = options.bgOpacity,\n      xlimit, ylimit, xmin, ymin, xscale, yscale, enabled = true,\n      btndown, animating, shift_down\n\n    docOffset = getPos($img)\n    // }}}\n    // }}}\n    // Internal Modules {{{\n    // Touch Module {{{\n    var Touch = (function() {\n      // Touch support detection function adapted (under MIT License)\n      // from code by Jeffrey Sambells - http://github.com/iamamused/\n      function hasTouchSupport() {\n        var support = {}, events = ['touchstart', 'touchmove', 'touchend'],\n          el = document.createElement('div'), i\n\n        try {\n          for (i = 0; i < events.length; i++) {\n            var eventName = events[i]\n            eventName = 'on' + eventName\n            var isSupported = (eventName in el)\n            if (!isSupported) {\n              el.setAttribute(eventName, 'return;')\n              isSupported = typeof el[eventName] === 'function'\n            }\n            support[events[i]] = isSupported\n          }\n          return support.touchstart && support.touchend && support.touchmove\n        } catch (err) {\n          return false\n        }\n      }\n\n      function detectSupport() {\n        if ((options.touchSupport === true) || (options.touchSupport === false)) return options.touchSupport\n        else return hasTouchSupport()\n      }\n      return {\n        createDragger: function(ord) {\n          return function(e) {\n            if (options.disabled) {\n              return false\n            }\n            if ((ord === 'move') && !options.allowMove) {\n              return false\n            }\n            docOffset = getPos($img)\n            btndown = true\n            startDragMode(ord, mouseAbs(Touch.cfilter(e)), true)\n            e.stopPropagation()\n            e.preventDefault()\n            return false\n          }\n        },\n        newSelection: function(e) {\n          return newSelection(Touch.cfilter(e))\n        },\n        cfilter: function(e) {\n          e.pageX = e.originalEvent.changedTouches[0].pageX\n          e.pageY = e.originalEvent.changedTouches[0].pageY\n          return e\n        },\n        isSupported: hasTouchSupport,\n        support: detectSupport()\n      }\n    }())\n    // }}}\n    // Coords Module {{{\n    var Coords = (function() {\n      var x1 = 0,\n        y1 = 0,\n        x2 = 0,\n        y2 = 0,\n        ox, oy\n\n      function setPressed(pos) // {{{\n      {\n        pos = rebound(pos)\n        x2 = x1 = pos[0]\n        y2 = y1 = pos[1]\n      }\n      // }}}\n      function setCurrent(pos) // {{{\n      {\n        pos = rebound(pos)\n        ox = pos[0] - x2\n        oy = pos[1] - y2\n        x2 = pos[0]\n        y2 = pos[1]\n      }\n      // }}}\n      function getOffset() // {{{\n      {\n        return [ox, oy]\n      }\n      // }}}\n      function moveOffset(offset) // {{{\n      {\n        var ox = offset[0],\n          oy = offset[1]\n\n        if (x1 + ox < 0) {\n          ox -= ox + x1\n        }\n        if (y1 + oy < 0) {\n          oy -= oy + y1\n        }\n\n        if (boundy < y2 + oy) {\n          oy += boundy - (y2 + oy)\n        }\n        if (boundx < x2 + ox) {\n          ox += boundx - (x2 + ox)\n        }\n\n        x1 += ox\n        x2 += ox\n        y1 += oy\n        y2 += oy\n      }\n      // }}}\n      function getCorner(ord) // {{{\n      {\n        var c = getFixed()\n        switch (ord) {\n          case 'ne':\n            return [c.x2, c.y]\n          case 'nw':\n            return [c.x, c.y]\n          case 'se':\n            return [c.x2, c.y2]\n          case 'sw':\n            return [c.x, c.y2]\n        }\n      }\n      // }}}\n      function getFixed() // {{{\n      {\n        if (!options.aspectRatio) {\n          return getRect()\n        }\n        // This function could use some optimization I think...\n        var aspect = options.aspectRatio,\n          min_x = options.minSize[0] / xscale,\n\n            // min_y = options.minSize[1]/yscale,\n          max_x = options.maxSize[0] / xscale,\n          max_y = options.maxSize[1] / yscale,\n          rw = x2 - x1,\n          rh = y2 - y1,\n          rwa = Math.abs(rw),\n          rha = Math.abs(rh),\n          real_ratio = rwa / rha,\n          xx, yy, w, h\n\n        if (max_x === 0) {\n          max_x = boundx * 10\n        }\n        if (max_y === 0) {\n          max_y = boundy * 10\n        }\n        if (real_ratio < aspect) {\n          yy = y2\n          w = rha * aspect\n          xx = rw < 0 ? x1 - w : w + x1\n\n          if (xx < 0) {\n            xx = 0\n            h = Math.abs((xx - x1) / aspect)\n            yy = rh < 0 ? y1 - h : h + y1\n          } else if (xx > boundx) {\n            xx = boundx\n            h = Math.abs((xx - x1) / aspect)\n            yy = rh < 0 ? y1 - h : h + y1\n          }\n        } else {\n          xx = x2\n          h = rwa / aspect\n          yy = rh < 0 ? y1 - h : y1 + h\n          if (yy < 0) {\n            yy = 0\n            w = Math.abs((yy - y1) * aspect)\n            xx = rw < 0 ? x1 - w : w + x1\n          } else if (yy > boundy) {\n            yy = boundy\n            w = Math.abs(yy - y1) * aspect\n            xx = rw < 0 ? x1 - w : w + x1\n          }\n        }\n\n        // Magic %-)\n        if (xx > x1) { // right side\n          if (xx - x1 < min_x) {\n            xx = x1 + min_x\n          } else if (xx - x1 > max_x) {\n            xx = x1 + max_x\n          }\n          if (yy > y1) {\n            yy = y1 + (xx - x1) / aspect\n          } else {\n            yy = y1 - (xx - x1) / aspect\n          }\n        } else if (xx < x1) { // left side\n          if (x1 - xx < min_x) {\n            xx = x1 - min_x\n          } else if (x1 - xx > max_x) {\n            xx = x1 - max_x\n          }\n          if (yy > y1) {\n            yy = y1 + (x1 - xx) / aspect\n          } else {\n            yy = y1 - (x1 - xx) / aspect\n          }\n        }\n\n        if (xx < 0) {\n          x1 -= xx\n          xx = 0\n        } else if (xx > boundx) {\n          x1 -= xx - boundx\n          xx = boundx\n        }\n\n        if (yy < 0) {\n          y1 -= yy\n          yy = 0\n        } else if (yy > boundy) {\n          y1 -= yy - boundy\n          yy = boundy\n        }\n\n        return makeObj(flipCoords(x1, y1, xx, yy))\n      }\n      // }}}\n      function rebound(p) // {{{\n      {\n        if (p[0] < 0) p[0] = 0\n        if (p[1] < 0) p[1] = 0\n\n        if (p[0] > boundx) p[0] = boundx\n        if (p[1] > boundy) p[1] = boundy\n\n        return [Math.round(p[0]), Math.round(p[1])]\n      }\n      // }}}\n      function flipCoords(x1, y1, x2, y2) // {{{\n      {\n        var xa = x1,\n          xb = x2,\n          ya = y1,\n          yb = y2\n        if (x2 < x1) {\n          xa = x2\n          xb = x1\n        }\n        if (y2 < y1) {\n          ya = y2\n          yb = y1\n        }\n        return [xa, ya, xb, yb]\n      }\n      // }}}\n      function getRect() // {{{\n      {\n        var xsize = x2 - x1,\n          ysize = y2 - y1,\n          delta\n\n        if (xlimit && (Math.abs(xsize) > xlimit)) {\n          x2 = (xsize > 0) ? (x1 + xlimit) : (x1 - xlimit)\n        }\n        if (ylimit && (Math.abs(ysize) > ylimit)) {\n          y2 = (ysize > 0) ? (y1 + ylimit) : (y1 - ylimit)\n        }\n\n        if (ymin / yscale && (Math.abs(ysize) < ymin / yscale)) {\n          y2 = (ysize > 0) ? (y1 + ymin / yscale) : (y1 - ymin / yscale)\n        }\n        if (xmin / xscale && (Math.abs(xsize) < xmin / xscale)) {\n          x2 = (xsize > 0) ? (x1 + xmin / xscale) : (x1 - xmin / xscale)\n        }\n\n        if (x1 < 0) {\n          x2 -= x1\n          x1 -= x1\n        }\n        if (y1 < 0) {\n          y2 -= y1\n          y1 -= y1\n        }\n        if (x2 < 0) {\n          x1 -= x2\n          x2 -= x2\n        }\n        if (y2 < 0) {\n          y1 -= y2\n          y2 -= y2\n        }\n        if (x2 > boundx) {\n          delta = x2 - boundx\n          x1 -= delta\n          x2 -= delta\n        }\n        if (y2 > boundy) {\n          delta = y2 - boundy\n          y1 -= delta\n          y2 -= delta\n        }\n        if (x1 > boundx) {\n          delta = x1 - boundy\n          y2 -= delta\n          y1 -= delta\n        }\n        if (y1 > boundy) {\n          delta = y1 - boundy\n          y2 -= delta\n          y1 -= delta\n        }\n\n        return makeObj(flipCoords(x1, y1, x2, y2))\n      }\n      // }}}\n      function makeObj(a) // {{{\n      {\n        return {\n          x: a[0],\n          y: a[1],\n          x2: a[2],\n          y2: a[3],\n          w: a[2] - a[0],\n          h: a[3] - a[1]\n        }\n      }\n      // }}}\n\n      return {\n        flipCoords: flipCoords,\n        setPressed: setPressed,\n        setCurrent: setCurrent,\n        getOffset: getOffset,\n        moveOffset: moveOffset,\n        getCorner: getCorner,\n        getFixed: getFixed\n      }\n    }())\n\n    // }}}\n    // Shade Module {{{\n    var Shade = (function() {\n      var enabled = false,\n        holder = $('<div />').css({\n          position: 'absolute',\n          zIndex: 240,\n          opacity: 0\n        }),\n        shades = {\n          top: createShade(),\n          left: createShade().height(boundy),\n          right: createShade().height(boundy),\n          bottom: createShade()\n        }\n\n      function resizeShades(w, h) {\n        shades.left.css({ height: px(h) })\n        shades.right.css({ height: px(h) })\n      }\n      function updateAuto() {\n        return updateShade(Coords.getFixed())\n      }\n      function updateShade(c) {\n        shades.top.css({\n          left: px(c.x),\n          width: px(c.w),\n          height: px(c.y)\n        })\n        shades.bottom.css({\n          top: px(c.y2),\n          left: px(c.x),\n          width: px(c.w),\n          height: px(boundy - c.y2)\n        })\n        shades.right.css({\n          left: px(c.x2),\n          width: px(boundx - c.x2)\n        })\n        shades.left.css({\n          width: px(c.x)\n        })\n      }\n      function createShade() {\n        return $('<div />').css({\n          position: 'absolute',\n          backgroundColor: options.shadeColor || options.bgColor\n        }).appendTo(holder)\n      }\n      function enableShade() {\n        if (!enabled) {\n          enabled = true\n          holder.insertBefore($img)\n          updateAuto()\n          Selection.setBgOpacity(1, 0, 1)\n          $img2.hide()\n\n          setBgColor(options.shadeColor || options.bgColor, 1)\n          if (Selection.isAwake()) {\n            setOpacity(options.bgOpacity, 1)\n          } else setOpacity(1, 1)\n        }\n      }\n      function setBgColor(color, now) {\n        colorChangeMacro(getShades(), color, now)\n      }\n      function disableShade() {\n        if (enabled) {\n          holder.remove()\n          $img2.show()\n          enabled = false\n          if (Selection.isAwake()) {\n            Selection.setBgOpacity(options.bgOpacity, 1, 1)\n          } else {\n            Selection.setBgOpacity(1, 1, 1)\n            Selection.disableHandles()\n          }\n          colorChangeMacro($div, 0, 1)\n        }\n      }\n      function setOpacity(opacity, now) {\n        if (enabled) {\n          if (options.bgFade && !now) {\n            holder.animate({\n              opacity: 1 - opacity\n            }, {\n              queue: false,\n              duration: options.fadeTime\n            })\n          } else holder.css({ opacity: 1 - opacity })\n        }\n      }\n      function refreshAll() {\n        options.shade ? enableShade() : disableShade()\n        if (Selection.isAwake()) setOpacity(options.bgOpacity)\n      }\n      function getShades() {\n        return holder.children()\n      }\n\n      return {\n        update: updateAuto,\n        updateRaw: updateShade,\n        getShades: getShades,\n        setBgColor: setBgColor,\n        enable: enableShade,\n        disable: disableShade,\n        resize: resizeShades,\n        refresh: refreshAll,\n        opacity: setOpacity\n      }\n    }())\n    // }}}\n    // Selection Module {{{\n    var Selection = (function() {\n      var awake,\n        hdep = 370,\n        borders = {},\n        handle = {},\n        dragbar = {},\n        seehandles = false\n\n      // Private Methods\n      function insertBorder(type) // {{{\n      {\n        var jq = $('<div />').css({\n          position: 'absolute',\n          opacity: options.borderOpacity\n        }).addClass(cssClass(type))\n        $img_holder.append(jq)\n        return jq\n      }\n      // }}}\n      function dragDiv(ord, zi) // {{{\n      {\n        var jq = $('<div />').mousedown(createDragger(ord)).css({\n          cursor: ord + '-resize',\n          position: 'absolute',\n          zIndex: zi\n        }).addClass('ord-' + ord)\n\n        if (Touch.support) {\n          jq.bind('touchstart.jcrop', Touch.createDragger(ord))\n        }\n\n        $hdl_holder.append(jq)\n        return jq\n      }\n      // }}}\n      function insertHandle(ord) // {{{\n      {\n        var hs = options.handleSize,\n\n          div = dragDiv(ord, hdep++).css({\n            opacity: options.handleOpacity\n          }).addClass(cssClass('handle'))\n\n        if (hs) { div.width(hs).height(hs) }\n\n        return div\n      }\n      // }}}\n      function insertDragbar(ord) // {{{\n      {\n        return dragDiv(ord, hdep++).addClass('jcrop-dragbar')\n      }\n      // }}}\n      function createDragbars(li) // {{{\n      {\n        var i\n        for (i = 0; i < li.length; i++) {\n          dragbar[li[i]] = insertDragbar(li[i])\n        }\n      }\n      // }}}\n      function createBorders(li) // {{{\n      {\n        var cl, i\n        for (i = 0; i < li.length; i++) {\n          switch (li[i]) {\n            case 'n': cl = 'hline'; break\n            case 's': cl = 'hline bottom'; break\n            case 'e': cl = 'vline right'; break\n            case 'w': cl = 'vline'; break\n          }\n          borders[li[i]] = insertBorder(cl)\n        }\n      }\n      // }}}\n      function createHandles(li) // {{{\n      {\n        var i\n        for (i = 0; i < li.length; i++) {\n          handle[li[i]] = insertHandle(li[i])\n        }\n      }\n      // }}}\n      function moveto(x, y) // {{{\n      {\n        if (!options.shade) {\n          $img2.css({\n            top: px(-y),\n            left: px(-x)\n          })\n        }\n        $sel.css({\n          top: px(y),\n          left: px(x)\n        })\n      }\n      // }}}\n      function resize(w, h) // {{{\n      {\n        $sel.width(Math.round(w)).height(Math.round(h))\n      }\n      // }}}\n      function refresh() // {{{\n      {\n        var c = Coords.getFixed()\n\n        Coords.setPressed([c.x, c.y])\n        Coords.setCurrent([c.x2, c.y2])\n\n        updateVisible()\n      }\n      // }}}\n\n      // Internal Methods\n      function updateVisible(select) // {{{\n      {\n        if (awake) {\n          return update(select)\n        }\n      }\n      // }}}\n      function update(select) // {{{\n      {\n        var c = Coords.getFixed()\n\n        resize(c.w, c.h)\n        moveto(c.x, c.y)\n        if (options.shade) Shade.updateRaw(c)\n\n        awake || show()\n\n        if (select) {\n          options.onSelect.call(api, unscale(c))\n        } else {\n          options.onChange.call(api, unscale(c))\n        }\n      }\n      // }}}\n      function setBgOpacity(opacity, force, now) // {{{\n      {\n        if (!awake && !force) return\n        if (options.bgFade && !now) {\n          $img.animate({\n            opacity: opacity\n          }, {\n            queue: false,\n            duration: options.fadeTime\n          })\n        } else {\n          $img.css('opacity', opacity)\n        }\n      }\n      // }}}\n      function show() // {{{\n      {\n        $sel.show()\n\n        if (options.shade) Shade.opacity(bgopacity)\n        else setBgOpacity(bgopacity, true)\n\n        awake = true\n      }\n      // }}}\n      function release() // {{{\n      {\n        disableHandles()\n        $sel.hide()\n\n        if (options.shade) Shade.opacity(1)\n        else setBgOpacity(1)\n\n        awake = false\n        options.onRelease.call(api)\n      }\n      // }}}\n      function showHandles() // {{{\n      {\n        if (seehandles) {\n          $hdl_holder.show()\n        }\n      }\n      // }}}\n      function enableHandles() // {{{\n      {\n        seehandles = true\n        if (options.allowResize) {\n          $hdl_holder.show()\n          return true\n        }\n      }\n      // }}}\n      function disableHandles() // {{{\n      {\n        seehandles = false\n        $hdl_holder.hide()\n      }\n      // }}}\n      function animMode(v) // {{{\n      {\n        if (v) {\n          animating = true\n          disableHandles()\n        } else {\n          animating = false\n          enableHandles()\n        }\n      }\n      // }}}\n      function done() // {{{\n      {\n        animMode(false)\n        refresh()\n      }\n      // }}}\n      // Insert draggable elements {{{\n      // Insert border divs for outline\n\n      if (options.dragEdges && $.isArray(options.createDragbars)) { createDragbars(options.createDragbars) }\n\n      if ($.isArray(options.createHandles)) { createHandles(options.createHandles) }\n\n      if (options.drawBorders && $.isArray(options.createBorders)) { createBorders(options.createBorders) }\n\n      // }}}\n\n      // This is a hack for iOS5 to support drag/move touch functionality\n      $(document).bind('touchstart.jcrop-ios', function(e) {\n        if ($(e.currentTarget).hasClass('jcrop-tracker')) e.stopPropagation()\n      })\n\n      var $track = newTracker().mousedown(createDragger('move')).css({\n        cursor: 'move',\n        position: 'absolute',\n        zIndex: 360\n      })\n\n      if (Touch.support) {\n        $track.bind('touchstart.jcrop', Touch.createDragger('move'))\n      }\n\n      $img_holder.append($track)\n      disableHandles()\n\n      return {\n        updateVisible: updateVisible,\n        update: update,\n        release: release,\n        refresh: refresh,\n        isAwake: function() {\n          return awake\n        },\n        setCursor: function(cursor) {\n          $track.css('cursor', cursor)\n        },\n        enableHandles: enableHandles,\n        enableOnly: function() {\n          seehandles = true\n        },\n        showHandles: showHandles,\n        disableHandles: disableHandles,\n        animMode: animMode,\n        setBgOpacity: setBgOpacity,\n        done: done\n      }\n    }())\n\n    // }}}\n    // Tracker Module {{{\n    var Tracker = (function() {\n      var onMove = function() {},\n        onDone = function() {},\n        trackDoc = options.trackDocument\n\n      function toFront(touch) // {{{\n      {\n        $trk.css({\n          zIndex: 450\n        })\n\n        if (touch) {\n          $(document)\n            .bind('touchmove.jcrop', trackTouchMove)\n            .bind('touchend.jcrop', trackTouchEnd)\n        } else if (trackDoc) {\n          $(document)\n            .bind('mousemove.jcrop', trackMove)\n            .bind('mouseup.jcrop', trackUp)\n        }\n      }\n      // }}}\n      function toBack() // {{{\n      {\n        $trk.css({\n          zIndex: 290\n        })\n        $(document).unbind('.jcrop')\n      }\n      // }}}\n      function trackMove(e) // {{{\n      {\n        onMove(mouseAbs(e))\n        return false\n      }\n      // }}}\n      function trackUp(e) // {{{\n      {\n        e.preventDefault()\n        e.stopPropagation()\n\n        if (btndown) {\n          btndown = false\n\n          onDone(mouseAbs(e))\n\n          if (Selection.isAwake()) {\n            options.onSelect.call(api, unscale(Coords.getFixed()))\n          }\n\n          toBack()\n          onMove = function() {}\n          onDone = function() {}\n        }\n\n        return false\n      }\n      // }}}\n      function activateHandlers(move, done, touch) // {{{\n      {\n        btndown = true\n        onMove = move\n        onDone = done\n        toFront(touch)\n        return false\n      }\n      // }}}\n      function trackTouchMove(e) // {{{\n      {\n        onMove(mouseAbs(Touch.cfilter(e)))\n        return false\n      }\n      // }}}\n      function trackTouchEnd(e) // {{{\n      {\n        return trackUp(Touch.cfilter(e))\n      }\n      // }}}\n      function setCursor(t) // {{{\n      {\n        $trk.css('cursor', t)\n      }\n      // }}}\n\n      if (!trackDoc) {\n        $trk.mousemove(trackMove).mouseup(trackUp).mouseout(trackUp)\n      }\n\n      $img.before($trk)\n      return {\n        activateHandlers: activateHandlers,\n        setCursor: setCursor\n      }\n    }())\n    // }}}\n    // KeyManager Module {{{\n    var KeyManager = (function() {\n      var $keymgr = $('<input type=\"radio\" />').css({\n          position: 'fixed',\n          left: '-120px',\n          width: '12px'\n        }).addClass('jcrop-keymgr'),\n\n        $keywrap = $('<div />').css({\n          position: 'absolute',\n          overflow: 'hidden'\n        }).append($keymgr)\n\n      function watchKeys() // {{{\n      {\n        if (options.keySupport) {\n          $keymgr.show()\n          $keymgr.focus()\n        }\n      }\n      // }}}\n      function onBlur(e) // {{{\n      {\n        $keymgr.hide()\n      }\n      // }}}\n      function doNudge(e, x, y) // {{{\n      {\n        if (options.allowMove) {\n          Coords.moveOffset([x, y])\n          Selection.updateVisible(true)\n        }\n        e.preventDefault()\n        e.stopPropagation()\n      }\n      // }}}\n      function parseKey(e) // {{{\n      {\n        if (e.ctrlKey || e.metaKey) {\n          return true\n        }\n        shift_down = !!e.shiftKey\n        var nudge = shift_down ? 10 : 1\n\n        switch (e.keyCode) {\n          case 37:\n            doNudge(e, -nudge, 0)\n            break\n          case 39:\n            doNudge(e, nudge, 0)\n            break\n          case 38:\n            doNudge(e, 0, -nudge)\n            break\n          case 40:\n            doNudge(e, 0, nudge)\n            break\n          case 27:\n            if (options.allowSelect) Selection.release()\n            break\n          case 9:\n            return true\n        }\n\n        return false\n      }\n      // }}}\n\n      if (options.keySupport) {\n        $keymgr.keydown(parseKey).blur(onBlur)\n        if (ie6mode || !options.fixedSupport) {\n          $keymgr.css({\n            position: 'absolute',\n            left: '-20px'\n          })\n          $keywrap.append($keymgr).insertBefore($img)\n        } else {\n          $keymgr.insertBefore($img)\n        }\n      }\n\n      return {\n        watchKeys: watchKeys\n      }\n    }())\n    // }}}\n    // }}}\n    // API methods {{{\n    function setClass(cname) // {{{\n    {\n      $div.removeClass().addClass(cssClass('holder')).addClass(cname)\n    }\n    // }}}\n    function animateTo(a, callback) // {{{\n    {\n      var x1 = a[0] / xscale,\n        y1 = a[1] / yscale,\n        x2 = a[2] / xscale,\n        y2 = a[3] / yscale\n\n      if (animating) {\n        return\n      }\n\n      var animto = Coords.flipCoords(x1, y1, x2, y2),\n        c = Coords.getFixed(),\n        initcr = [c.x, c.y, c.x2, c.y2],\n        animat = initcr,\n        interv = options.animationDelay,\n        ix1 = animto[0] - initcr[0],\n        iy1 = animto[1] - initcr[1],\n        ix2 = animto[2] - initcr[2],\n        iy2 = animto[3] - initcr[3],\n        pcent = 0,\n        velocity = options.swingSpeed\n\n      x1 = animat[0]\n      y1 = animat[1]\n      x2 = animat[2]\n      y2 = animat[3]\n\n      Selection.animMode(true)\n      var anim_timer\n\n      function queueAnimator() {\n        window.setTimeout(animator, interv)\n      }\n      var animator = (function() {\n        return function() {\n          pcent += (100 - pcent) / velocity\n\n          animat[0] = Math.round(x1 + ((pcent / 100) * ix1))\n          animat[1] = Math.round(y1 + ((pcent / 100) * iy1))\n          animat[2] = Math.round(x2 + ((pcent / 100) * ix2))\n          animat[3] = Math.round(y2 + ((pcent / 100) * iy2))\n\n          if (pcent >= 99.8) {\n            pcent = 100\n          }\n          if (pcent < 100) {\n            setSelectRaw(animat)\n            queueAnimator()\n          } else {\n            Selection.done()\n            Selection.animMode(false)\n            if (typeof (callback) === 'function') {\n              callback.call(api)\n            }\n          }\n        }\n      }())\n      queueAnimator()\n    }\n    // }}}\n    function setSelect(rect) // {{{\n    {\n      setSelectRaw([rect[0] / xscale, rect[1] / yscale, rect[2] / xscale, rect[3] / yscale])\n      options.onSelect.call(api, unscale(Coords.getFixed()))\n      Selection.enableHandles()\n    }\n    // }}}\n    function setSelectRaw(l) // {{{\n    {\n      Coords.setPressed([l[0], l[1]])\n      Coords.setCurrent([l[2], l[3]])\n      Selection.update()\n    }\n    // }}}\n    function tellSelect() // {{{\n    {\n      return unscale(Coords.getFixed())\n    }\n    // }}}\n    function tellScaled() // {{{\n    {\n      return Coords.getFixed()\n    }\n    // }}}\n    function setOptionsNew(opt) // {{{\n    {\n      setOptions(opt)\n      interfaceUpdate()\n    }\n    // }}}\n    function disableCrop() // {{{\n    {\n      options.disabled = true\n      Selection.disableHandles()\n      Selection.setCursor('default')\n      Tracker.setCursor('default')\n    }\n    // }}}\n    function enableCrop() // {{{\n    {\n      options.disabled = false\n      interfaceUpdate()\n    }\n    // }}}\n    function cancelCrop() // {{{\n    {\n      Selection.done()\n      Tracker.activateHandlers(null, null)\n    }\n    // }}}\n    function destroy() // {{{\n    {\n      $div.remove()\n      $origimg.show()\n      $origimg.css('visibility', 'visible')\n      $(obj).removeData('Jcrop')\n    }\n    // }}}\n    function setImage(src, callback) // {{{\n    {\n      Selection.release()\n      disableCrop()\n      var img = new Image()\n      img.onload = function() {\n        var iw = img.width\n        var ih = img.height\n        var bw = options.boxWidth\n        var bh = options.boxHeight\n        // $img.context.style.width = boundx + 'px';\n        // $img.context.style.height = boundy + 'px';\n        $img.width(iw).height(ih)\n        $img.attr('src', src)\n        $img2.attr('src', src)\n        presize($img, bw, bh)\n        boundx = $img.width()\n        boundy = $img.height()\n\n        $img2.width(boundx).height(boundy)\n        $img2.css({ background: '#0f0' })\n        $trk.width(boundx + (bound * 2)).height(boundy + (bound * 2))\n        $div.width(boundx).height(boundy)\n        Shade.resize(boundx, boundy)\n        enableCrop()\n        if (typeof (callback) === 'function') {\n          callback.call(api)\n        }\n      }\n      img.src = src\n    }\n    // }}}\n    function colorChangeMacro($obj, color, now) {\n      var mycolor = color || options.bgColor\n      if (options.bgFade && supportsColorFade() && options.fadeTime && !now) {\n        $obj.animate({\n          backgroundColor: mycolor\n        }, {\n          queue: false,\n          duration: options.fadeTime\n        })\n      } else {\n        $obj.css('backgroundColor', mycolor)\n      }\n    }\n    function interfaceUpdate(alt) // {{{\n    // This method tweaks the interface based on options object.\n    // Called when options are changed and at end of initialization.\n    {\n      if (options.allowResize) {\n        if (alt) {\n          Selection.enableOnly()\n        } else {\n          Selection.enableHandles()\n        }\n      } else {\n        Selection.disableHandles()\n      }\n\n      Tracker.setCursor(options.allowSelect ? 'crosshair' : 'default')\n      Selection.setCursor(options.allowMove ? 'move' : 'default')\n\n      if (options.hasOwnProperty('trueSize')) {\n        xscale = options.trueSize[0] / boundx\n        yscale = options.trueSize[1] / boundy\n      }\n\n      if (options.hasOwnProperty('setSelect')) {\n        setSelect(options.setSelect)\n        Selection.done()\n        delete (options.setSelect)\n      }\n\n      Shade.refresh()\n\n      if (options.bgColor != bgcolor) {\n        colorChangeMacro(\n          options.shade ? Shade.getShades() : $div,\n          options.shade\n            ? (options.shadeColor || options.bgColor)\n            : options.bgColor\n        )\n        bgcolor = options.bgColor\n      }\n\n      if (bgopacity != options.bgOpacity) {\n        bgopacity = options.bgOpacity\n        if (options.shade) Shade.refresh()\n        else Selection.setBgOpacity(bgopacity)\n      }\n\n      xlimit = options.maxSize[0] || 0\n      ylimit = options.maxSize[1] || 0\n      xmin = options.minSize[0] || 0\n      ymin = options.minSize[1] || 0\n\n      if (options.hasOwnProperty('outerImage')) {\n        $img.attr('src', options.outerImage)\n        delete (options.outerImage)\n      }\n\n      Selection.refresh()\n    }\n    // }}}\n    // }}}\n\n    if (Touch.support) $trk.bind('touchstart.jcrop', Touch.newSelection)\n\n    $hdl_holder.hide()\n    interfaceUpdate(true)\n\n    var api = {\n      setImage: setImage,\n      animateTo: animateTo,\n      setSelect: setSelect,\n      setOptions: setOptionsNew,\n      tellSelect: tellSelect,\n      tellScaled: tellScaled,\n      setClass: setClass,\n\n      disable: disableCrop,\n      enable: enableCrop,\n      cancel: cancelCrop,\n      release: Selection.release,\n      destroy: destroy,\n\n      focus: KeyManager.watchKeys,\n\n      getBounds: function() {\n        return [boundx * xscale, boundy * yscale]\n      },\n      getWidgetSize: function() {\n        return [boundx, boundy]\n      },\n      getScaleFactor: function() {\n        return [xscale, yscale]\n      },\n      getOptions: function() {\n        // careful: internal values are returned\n        return options\n      },\n\n      ui: {\n        holder: $div,\n        selection: $sel\n      }\n    }\n\n    if (is_msie) $div.bind('selectstart', function() { return false })\n\n    $origimg.data('Jcrop', api)\n    return api\n  }\n  $.fn.Jcrop = function(options, callback) // {{{\n  {\n    var api\n    // Iterate over each object, attach Jcrop\n    this.each(function() {\n      // If we've already attached to this object\n      if ($(this).data('Jcrop')) {\n        // The API can be requested this way (undocumented)\n        if (options === 'api') return $(this).data('Jcrop')\n        // Otherwise, we just reset the options...\n        else $(this).data('Jcrop').setOptions(options)\n      }\n      // If we haven't been attached, preload and attach\n      else {\n        if (this.tagName == 'IMG') {\n          $.Jcrop.Loader(this, function() {\n            $(this).css({ display: 'block', visibility: 'hidden' })\n            api = $.Jcrop(this, options)\n            if ($.isFunction(callback)) callback.call(api)\n          })\n        } else {\n          $(this).css({ display: 'block', visibility: 'hidden' })\n          api = $.Jcrop(this, options)\n          if ($.isFunction(callback)) callback.call(api)\n        }\n      }\n    })\n\n    // Return \"this\" so the object is chainable (jQuery-style)\n    return this\n  }\n  // }}}\n  // $.Jcrop.Loader - basic image loader {{{\n\n  $.Jcrop.Loader = function(imgobj, success, error) {\n    var $img = $(imgobj), img = $img[0]\n\n    function completeCheck() {\n      if (img.complete) {\n        $img.unbind('.jcloader')\n        if ($.isFunction(success)) success.call(img)\n      } else window.setTimeout(completeCheck, 50)\n    }\n\n    $img\n      .bind('load.jcloader', completeCheck)\n      .bind('error.jcloader', function(e) {\n        $img.unbind('.jcloader')\n        if ($.isFunction(error)) error.call(img)\n      })\n\n    if (img.complete && $.isFunction(success)) {\n      $img.unbind('.jcloader')\n      success.call(img)\n    }\n  }\n\n  // }}}\n  // Global Defaults {{{\n  $.Jcrop.defaults = {\n\n    // Basic Settings\n    allowSelect: true,\n    allowMove: true,\n    allowResize: true,\n\n    trackDocument: true,\n\n    // Styling Options\n    baseClass: 'jcrop',\n    addClass: null,\n    bgColor: 'black',\n    bgOpacity: 0.6,\n    bgFade: false,\n    borderOpacity: 0.4,\n    handleOpacity: 0.5,\n    handleSize: null,\n\n    aspectRatio: 0,\n    keySupport: true,\n    createHandles: ['n', 's', 'e', 'w', 'nw', 'ne', 'se', 'sw'],\n    createDragbars: ['n', 's', 'e', 'w'],\n    createBorders: ['n', 's', 'e', 'w'],\n    drawBorders: true,\n    dragEdges: true,\n    fixedSupport: true,\n    touchSupport: null,\n\n    shade: null,\n\n    boxWidth: 0,\n    boxHeight: 0,\n    boundary: 2,\n    fadeTime: 400,\n    animationDelay: 20,\n    swingSpeed: 3,\n\n    minSelect: [0, 0],\n    maxSize: [0, 0],\n    minSize: [0, 0],\n\n    // Callbacks / Event Handlers\n    onChange: function() {},\n    onSelect: function() {},\n    onDblClick: function() {},\n    onRelease: function() {}\n  }\n\n  // }}}\n}(jQuery))\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/jquery.jcrop.js","<template>\n    <div class=\"picture-cropper-mode\" v-if=\"visible\">\n      <div class=\"picture-cropper-wrap\">\n        <div class=\"pc-inner-header\">\n          <span class=\"pc-header-title\">{{title}}</span>\n          <i class=\"el-icon-close\" @click=\"cancel\"></i>\n        </div>\n        <div class=\"pc-wrap-inner clear\">\n          <div class=\"wrap-container\">\n            <div class=\"pic-wrapper\">\n              <img ref=\"pre-picture\" :src=\"img_url\" id=\"pre-picture\" alt=\"\">\n            </div>\n          </div>\n          <div class=\"pc-wrap-inner-right\" :style=\"{ width:(width+20) + 'px' }\">\n            <div id=\"preview-pane\" :style=\"{ height:width/aspectRatio + 'px',width:width + 'px' }\">\n              <div class=\"preview-container\" :style=\"{ height:width/aspectRatio + 'px',width:width + 'px' }\">\n                <img :src=\"img_url\" class=\"jcrop-preview\" alt=\"Preview\" />\n              </div>\n            </div>\n            <div class=\"tip-msg\">\n              <p>\n                <span class=\"red\"></span>360ie10\n              </p>\n            </div>\n          </div>\n          \n        </div>\n        <div class=\"pc-handle-wrap\">\n          \n          <form id=\"picture-form\" action=\"\" enctype=\"multipart/form-data\">\n            <label for=\"inputImage\" class=\"btn-check-file\">\n              <input class=\"btn-file\" name=\"file\" @change=\"changeImg\" type=\"file\" id=\"inputImage\">\n              <span></span>\n            </label>\n          </form>\n          <!--<button class=\"el-button el-button&#45;&#45;primary\" @click=\"setCanvas(canvasOption)\"></button>-->\n          <button class=\"el-button el-button--primary\" @click=\"subForm\">{{sync?'':''}}</button>\n        </div>\n      </div>\n    </div>\n   \n</template>\n\n<script type=\"text/ecmascript-6\">\n//   import $ from 'jquery'\n  import '../assets/js/jquery.jcrop.js'\n  import '../assets/css/jquery.jcrop.min.css'\n//   require('@/assets/js/jquery.jcrop.js');\n//   require('@/assets/css/jquery.jcrop.min.css');\n  export default{\n    props:{\n      action:{\n          default:''\n      },\n      aspectRatio:{\n          default: 1/1\n      },\n      width:{\n          default:200\n      },\n      url:{\n          default:''\n      },\n      maxSize:{\n          default:2\n      },\n      acceptType:{\n          default:'jpeg,jpg,png'\n      },\n      data:{\n      \n      },\n      sync:{\n          default:false\n      },\n      maxWidth:{\n        default:600\n      },\n      title:{\n          default:''\n      },\n      visible: {\n        default: false\n      }\n    },\n    data(){\n      return {\n        img_url:this.url,\n        jcrop_api:'',\n        boundx:'',\n        boundy:'',\n        widget:[0,0],\n        $preview:undefined,\n        $pcnt:undefined,\n        $pimg:undefined,\n        canvasOption:{},\n        icon_url:'',\n        pre_width:0,\n        zoom:1\n      }\n    },\n    methods:{\n      testMaxSize(file){\n          let self = this;\n          let image = new Image();\n          if(file.files && file.files[0]){\n           let fileData = file.files[0];\n           let size = fileData.size;   //\n           let reader = new FileReader();\n           reader.onload = function (e) {\n             let data = e.target.result;\n             //\n            \n             image.src= data;\n             image.onload = function(){\n                 self.boundy = image.height;\n                 self.boundx = image.width;\n                 if(image.width>5000||image.height>5000){\n                    $(\"#inputImage\").val('');\n                    self.$message({message:\"\",type:\"warning\"});\n                    return false\n                 }\n                 if(!size){\n                    self.$message({message:'',type:'warning'})\n                 } else if(self.maxSize<size/(1024*1024)) {\n                   self.$message({message:\"\"+self.maxSize+'M',type:'warning'});\n                   $(\"#inputImage\").val('');\n                 } else if(self.acceptType.indexOf(file.files[0].type.split('/')[1].toLowerCase())<0){\n                   self.$message({message:''+self.acceptType+'',type:'warning'});\n                   $(\"#inputImage\").val('');\n                 } else {\n                     self.jcrop_api.setImage(data,function () {\n                         self.widget = this.getWidgetSize();\n                          this.setSelect([0,0,300,300]);\n                         $(\"#pre-picture\").parent().css({\n                           position:'absolute',\n                           width: self.widget[0]+'px',\n                           marginLeft:'-' + self.widget[0]/2+'px',\n                           marginTop:'-' + self.widget[1]/2+'px'\n                         });\n                     });\n                     self.img_url = data;\n                     self.resetCrop();\n                 }\n             };\n             image.onerror = function(e){\n                self.$message({message:'',type:'error'});\n                $(\"#inputImage\").val('');\n                return false\n             }\n             \n           };\n           reader.readAsDataURL(fileData);\n         }else{\n            this.isIE()\n         }\n      },\n      subForm(){\n        if(this.setCanvas(this.canvasOption)){\n            this.syncUrl(this.icon_url);\n            if(this.sync){\n              this.cancel();\n              return false;\n            }else {\n              this.submitImageFile()\n            }\n        }else {\n           this.$message({message:'',type:'warning'})\n        }\n      },\n      submitImageFile(callback){\n          if(this.icon_url!=='error'){\n            if(this.icon_url===''){\n                return callback({returnCode:200})\n            }\n            var formData = new FormData();   //form,FormData\n            //convertBase64UrlToBlobbase64Blob\n            //append,htmlinputname\n            // console.log(1, this.icon_url)\n            var blob = this.dataURLtoBlob(this.icon_url)\n            // console.log(blob)\n            formData.append('file',blob,'avatar-image.png')\n            \n            for(let k in this.data){\n                formData.append(k,this.data[k])\n            }\n            if(!this.sync){\n              this.$myLoad('...');\n            }\n            //ajax form\n            $.ajax({\n              url : this.action,\n              type : \"post\",\n              data : formData,\n              dataType:\"text\",\n              processData : false,         // jQuery\n              contentType : false,        // jQueryContent-Type\n              success:(data)=>{\n                this.$emit('success',JSON.parse(data));\n                if(!this.sync){\n                  this.cancel();\n                  this.$loading().close();\n                  this.$message({message:JSON.parse(data).msg,type:'success'});\n                }else {\n                  callback(JSON.parse(data));\n                }\n                \n              },\n              error:(err)=>{\n                this.$loading().close();\n              },\n              xhr:function(){            //jqueryajaxXMLHttpRequest\n                var xhr = new XMLHttpRequest();\n                xhr.upload.addEventListener(\"progress\", function(evt){\n                  if (evt.lengthComputable) {}\n                }, false)\n                return xhr\n              }\n  \n            });\n          }else {\n              this.$message({message:'',type:'warning'})\n          }\n      },\n        dataURLtoBlob(dataurl) {\n            var arr = dataurl.split(','), mime = arr[0].match(/:(.*?);/)[1],\n                bstr = atob(arr[1]), n = bstr.length, u8arr = new Uint8Array(n);\n            while(n--){\n            u8arr[n] = bstr.charCodeAt(n);\n            }\n            var blob = new Blob([u8arr], {type:mime,filename:'image.png'});\n            return blob;\n        },\n      resetCrop(){\n        let self = this;\n        this.$preview = $('#preview-pane');\n        this.$pimg = $('#preview-pane .preview-container img');\n        $('#pre-picture').Jcrop({\n          bgFade: true,\n            // allowSelect:false,\n          boxHeight:400,\n          boxWidth:400,\n          onChange: this.updatePreview,\n          onSelect: this.updatePreview,\n          aspectRatio: this.aspectRatio\n        }, function() {\n          self.jcrop_api = this;\n          // Use the API to get the real image size\n          var bounds = this.getBounds();\n          self.widget = this.getWidgetSize();\n          self.boundx = bounds[0];\n          self.boundy = bounds[1];\n          this.setSelect([0,0,300,200]);\n          $(\"#pre-picture\").parent().css({\n            position:'absolute',\n            width: self.widget[0]+'px',\n            marginLeft:'-' + self.widget[0]/2+'px',\n            marginTop:'-' + self.widget[1]/2+'px'\n          });\n          // Store the API in the jcrop_api variable\n    \n        });\n      },\n      setCanvas(op){\n        let image_target = $('#preview-pane .preview-container img')[0];\n        // \n        let _img = document.createElement('img'),z=1;\n        _img.src = image_target.src;\n        // _img.setAttribute('crossOrigin', 'anonymous');\n        let crop_canvas = document.createElement('canvas');\n        this.zoom = _img.width/this.boundx;\n        if(op.w*this.zoom>this.maxWidth){\n          z = this.maxWidth/(op.w*this.zoom)\n        }\n        crop_canvas.width = op.w*this.zoom*z;\n        crop_canvas.height = op.h*this.zoom*z;\n        try {\n          crop_canvas.getContext('2d').drawImage(\n            image_target,\n            op.x*this.zoom,\n            op.y*this.zoom,\n            op.w*this.zoom,\n            op.h*this.zoom,\n            0,\n            0,\n            op.w*this.zoom*z,\n            op.h*this.zoom*z\n          );\n          this.icon_url = crop_canvas.toDataURL();\n        }catch (err){\n          return this.icon_url = 'error'\n        }\n        return this.icon_url;\n      },\n      changeImg(e){\n        this.testMaxSize(e.target);\n      },\n      updatePreview(c) {\n        if (parseInt(c.w) > 0) {\n          var rx = this.width / c.w;\n          var ry = (this.width/this.aspectRatio) / c.h;\n          this.canvasOption = c;\n          this.$pimg.css({\n            width: Math.round(rx * this.boundx) + 'px',\n            height: Math.round(ry * this.boundy) + 'px',\n            marginLeft: '-' + Math.round(rx * c.x) + 'px',\n            marginTop: '-' + Math.round(ry * c.y) + 'px'\n          });\n          \n        }\n      },\n      isIE() {\n        /*... ie9iframe*/\n        let userAgent = navigator.userAgent; //userAgent\n        let isIE = userAgent.indexOf(\"compatible\") > -1 && userAgent.indexOf(\"MSIE\") > -1; //IE<11\n        // var isEdge = userAgent.indexOf(\"Edge\") > -1 && !isIE; //IEEdge\n        if (isIE) {\n          let reIE = new RegExp(\"MSIE (\\\\d+\\\\.\\\\d+);\");\n          reIE.test(userAgent);\n          let fIEVersion = parseFloat(RegExp[\"$1\"]);\n          if (fIEVersion !== 10) {\n            this.$message({message: 'ie', type: 'warning'});\n            return false;\n          }\n        }\n      },\n     \n      cancel(){\n        this.$emit('close',true)\n      },\n      syncUrl(url){\n         this.$emit('syncUrl',url)\n      }\n    },\n    mounted(){\n      // Grab some information about the preview pane\n//      let self = this;\n//      this.$nextTick(()=>{\n//        self.resetCrop(self.img_url)\n//      });\n    },\n    watch:{\n      visible:function (val) {\n        if(val){\n          this.$nextTick(()=>{\n            this.resetCrop(this.img_url)\n          })\n        }\n      }\n    }\n  }\n  \n</script>\n<style lang=\"stylus\" rel=\"stylesheet/stylus\">\n.picture-cropper-mode\n  position fixed\n  top 0\n  left 0\n  width 100%\n  height 100%\n  z-index 1990\n  background rgba(0,0,0,0.6)\n  text-align center\n  &:after\n    content ''\n    height 100%\n    width 0\n    display inline-block\n    vertical-align middle\n.picture-cropper-wrap\n  display inline-block\n  vertical-align middle\n  background #fff\n  padding 20px 30px\n  text-align left\n  .pc-inner-header\n    line-height 20px\n    .pc-header-title\n      font-size 18px\n    .el-icon-close\n      float right\n      cursor pointer\n      &:hover\n        color #ff4d51\n  .btn-check-file\n    display inline-block\n    line-height 1\n    padding 10px 15px\n    border-radius 5px\n    background #00ffff\n    cursor pointer\n    font-size 16px\n    color #fff\n    border 1px solid #00ffff\n    :hover\n      border-color #00f1f1\n      background #00f1f1\n  input[type='file']\n    display inline-block\n    height 1px\n    width 1px\n    overflow hidden\n    margin-top -1px\n  #picture-form\n    display inline-block\n.pc-handle-wrap\n    height 40px\n    line-height 40px\n    padding 30px 0 15px\n    border-top 1px solid #ddd\n    box-sizing content-box\n    text-align right\n    \n.docs-preview\n    .img-preview\n        overflow hidden\n.pc-wrap-inner\n  padding 30px 0\n  overflow hidden\n  .pc-wrap-inner-right\n    overflow hidden\n    padding-left 20px\n    box-sizing content-box\n    .tip-msg\n      margin 15px 0\n      font-size 14px\n      .red\n        color #ff4d51\n.wrap-container\n  position relative\n  float left\n  width 400px\n  height 400px\n  line-height 400px\n  background #ddd\n  text-align center\n  .pic-wrapper\n    /*position absolute*/\n    top 50%\n    left 50%\n    display block\n    vertical-align middle\n    max-width 100%\n    max-height 400px\n    overflow hidden\n    margin 0 auto\n    \n  #pre-picture\n    max-height 400px!important\n    max-width 100%!important\n    height auto!important\n    width auto!important\n   \n #preview-pane {\n    display: block;\n    /*position: absolute;*/\n    z-index: 2000;\n    top: 10px;\n    right: -280px;\n    padding: 6px;\n    border: 1px rgba(0,0,0,.4) solid;\n    background-color: white;\n    border-radius: 6px;\n    box-shadow: 1px 1px 5px 2px rgba(0, 0, 0, 0.2);\n    box-sizing content-box\n}\n\n/* The Javascript code will set the aspect ratio of the crop\n   area based on the size of the thumbnail preview,\n   specified here */\n#preview-pane .preview-container {\n  overflow: hidden;\n}\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/img_upload.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.visible)?_c('div',{staticClass:\"picture-cropper-mode\"},[_c('div',{staticClass:\"picture-cropper-wrap\"},[_c('div',{staticClass:\"pc-inner-header\"},[_c('span',{staticClass:\"pc-header-title\"},[_vm._v(_vm._s(_vm.title))]),_vm._v(\" \"),_c('i',{staticClass:\"el-icon-close\",on:{\"click\":_vm.cancel}})]),_vm._v(\" \"),_c('div',{staticClass:\"pc-wrap-inner clear\"},[_c('div',{staticClass:\"wrap-container\"},[_c('div',{staticClass:\"pic-wrapper\"},[_c('img',{ref:\"pre-picture\",attrs:{\"src\":_vm.img_url,\"id\":\"pre-picture\",\"alt\":\"\"}})])]),_vm._v(\" \"),_c('div',{staticClass:\"pc-wrap-inner-right\",style:({ width:(_vm.width+20) + 'px' })},[_c('div',{style:({ height:_vm.width/_vm.aspectRatio + 'px',width:_vm.width + 'px' }),attrs:{\"id\":\"preview-pane\"}},[_c('div',{staticClass:\"preview-container\",style:({ height:_vm.width/_vm.aspectRatio + 'px',width:_vm.width + 'px' })},[_c('img',{staticClass:\"jcrop-preview\",attrs:{\"src\":_vm.img_url,\"alt\":\"Preview\"}})])]),_vm._v(\" \"),_vm._m(0)])]),_vm._v(\" \"),_c('div',{staticClass:\"pc-handle-wrap\"},[_c('form',{attrs:{\"id\":\"picture-form\",\"action\":\"\",\"enctype\":\"multipart/form-data\"}},[_c('label',{staticClass:\"btn-check-file\",attrs:{\"for\":\"inputImage\"}},[_c('input',{staticClass:\"btn-file\",attrs:{\"name\":\"file\",\"type\":\"file\",\"id\":\"inputImage\"},on:{\"change\":_vm.changeImg}}),_vm._v(\" \"),_c('span',[_vm._v(\"\")])])]),_vm._v(\" \"),_c('button',{staticClass:\"el-button el-button--primary\",on:{\"click\":_vm.subForm}},[_vm._v(_vm._s(_vm.sync?'':''))])])])]):_vm._e()}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"tip-msg\"},[_c('p',[_c('span',{staticClass:\"red\"},[_vm._v(\"\")]),_vm._v(\"360ie10\\n          \")])])}]\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@14.2.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-5f1391b5\",\"hasScoped\":false,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@14.2.2@vue-loader/lib/selector.js?type=template&index=0!./src/components/img_upload.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}